<!DOCTYPE html>
<html lang="en">
<head>
<meta name="viewport" content="width=device-width, initial-scale=1" charset="utf-8">
  <title>How DC Spends</title>

  <link rel='shortcut icon' href='favicon.ico' type='image/x-icon'/>

  <link rel="stylesheet" href="http://maxcdn.bootstrapcdn.com/bootstrap/3.3.4/css/bootstrap.min.css">
  <link rel="stylesheet" href="http://maxcdn.bootstrapcdn.com/font-awesome/4.3.0/css/font-awesome.min.css">
  <link href='http://fonts.googleapis.com/css?family=Neuton:400,700' rel='stylesheet' type='text/css'>

  <link href='./CSS/main.css' rel='stylesheet' type='text/css'>
  <link href='./CSS/CEX.css' rel='stylesheet' type='text/css'>

  <script src="http://ajax.googleapis.com/ajax/libs/jquery/1.11.2/jquery.min.js"></script>
  <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.4/js/bootstrap.min.js"></script>
  <script src="http://d3js.org/d3.v3.min.js"></script> 
  <script src="http://labratrevenge.com/d3-tip/javascripts/d3.tip.v0.6.3.js"></script>
 <script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-65753381-1', 'auto');
  ga('send', 'pageview');

</script>
</head>

<body>
<nav class="xsheader navbar navbar-default navbar-static-top">
  <div class='clearfix xsheader'>      
        <button type="button" class="navbar-toggle" data-toggle="collapse" data-target=".navbar-collapse">
          <span class="sr-only">Toggle navigation</span>
          <span class="mybar icon-bar"></span>
          <span class="mybar icon-bar"></span>
          <span class="mybar icon-bar"></span> 
        </button>
        <a class="navbar-brand" href="./index.html">
          <img src="./Images/DataLensDCResponsiveLogo2.png" alt="DataLensDC">  
        </a>
      <ul class="navbar-nav navbar-custom navbar-static-top navbar-collapse collapse dropdown-pull-right" id="main-navbar-custom">
        <li><a href="./about.html">About</a></li>
        <li><a href="./subscribe.html">Subscribe</a></li>
        <li><a href="./archive.html">Archive</a></li>
        <li class="dropdown"><a class="dropdown-toggle" href='#' data-toggle='dropdown'>Connect<span class='caret'></span></a>
          <ul class="navbar-custom dropmenu dropdown-menu dropdown-pull-right">
            <li><a href="mailto:datalensdc@gmail.com" target="_blank"> <i class="fa fa-envelope"></i> send an email</a></li>
            <li><a href="https://twitter.com/DataLensDC" target="_blank"><i class="fa fa-twitter"></i> tweet our way</a></li>
            <li><a href="https://github.com/katerabinowitz" target="_blank"><i class="fa fa-github"></i> git at us</a></li>
            <!-- <li><a href="https://www.linkedin.com/pub/kate-rabinowitz/3b/b30/168" target="_blank"><i class="fa fa-linkedin"></i> link up</a></li>  -->     
          </ul>
        </li>
      </ul>
  </div>
</nav>

<nav class="smheader navbar navbar-default navbar-static-top">
<a href="./index.html"><img class="logo" src="./Images/DataLensDC logo.png" alt="DataLensDC"></a>
  <div class="navbar-fixed">
    <ul class ="headerlist">
        <li><a href="./about.html">about</a></li>
        <li><a href="./subscribe.html">subscribe</a></li>
        <li><a href="mailto:datalensdc@gmail.com">email</a></li>
    </ul>
  </div>
</nav>

<div class='content row'>
  <div class='col-sm-9 col-xs-12'>
  <br>
    <h2><a href='./how-DC-spends.html'>How the DC Region Spends</a></h2>
    <hr id='top-line'>
    <h3> Kate Rabinowitz // October 8, 2015 </h3>
    <p class="content"> As any resident of the DC region knows, this is an expensive place to live. That's in part balanced by the region's wealth. But how do expenses compare to other major metropolitan areas? I often wonder this when I visit other cities, purusing their shops and real estate listings. A recent Bureau of Labor Statistics study looks at this very question and reports the average spend of consumer units (like households) across a range of spending categories.<br><br>Check out the interactive chart below to see the percentage of annual expenditure an average consumer unit spends on each cateogory across urban areas. Press a button to change the view and hover over a bar to see the actual dollar amount spent. <a href="http://www.washingtonian.com/blogs/capitalcomment/data/how-the-dc-region-spends-its-money.php" target="blank" class="link">Read the rest in my recent Washingtonian piece.</a></p>

    <div class="btn-content">
    <input name="updateButton" 
           type="button" 
           value="Eating Out" 
           onclick="EatOutData()"
           class="d3btn"/>

    <input name="updateButton" 
           type="button" 
           value="Alcohol" 
           onclick="AlcData()" 
           class="d3btn"/>

    <input name="updateButton" 
           type="button" 
           value="Smoking (Tobacco)" 
           onclick="tobaccoData()" 
           class="d3btn"/>

     <input name="updateButton" 
           type="button" 
           value="Entertainment" 
           onclick="entData()" 
           class="d3btn"/>

          <br>

      <input name="updateButton" 
           type="button" 
           value="Reading" 
           onclick="rData()" 
           class="d3btn"/>

    <input name="updateButton" 
           type="button" 
           value="Look" 
           onclick="lookData()" 
           class="d3btn"/>

    <input name="updateButton" 
           type="button" 
           value="Dress" 
           onclick="dressData()" 
           class="d3btn"/>

    <input name="updateButton" 
           type="button" 
           value="Public Transit" 
           onclick="ptranData()" 
           class="d3btn"/>

    <input name="updateButton" 
           type="button" 
           value="Car Costs" 
           onclick="carData()" 
           class="d3btn"/>
    </div>

<div id="citiesBar">
<svg class="cex"></svg>
<script>
var margin = {top: 40, right: 40, bottom: 80, left: 40},
    width = 675 - margin.left - margin.right,
    height =  320- margin.top - margin.bottom;

var x = d3.scale.ordinal()
    .rangeRoundBands([0, width], .05);

var y = d3.scale.linear()
    .range([height, 0]);

var xAxis = d3.svg.axis()
    .scale(x)
    .orient("bottom");

var yAxis = d3.svg.axis()
    .scale(y)
    .outerTickSize(0)
    .orient("left");

var tip = d3.tip()
  .attr('class', 'd3-tip')
  .offset([-10, 0])
  .html(function(d) {
    return "<strong>Eating In: $</strong> <span>" + d.FoodAtHome + "</span>";
  })

var cex = d3.select(".cex")
    .attr("width", width + margin.left + margin.right)
    .attr("height", height + margin.top + margin.bottom)
  .append("g")
    .attr("transform", "translate(" + margin.left + "," + margin.top + ")");

cex.call(tip);

d3.csv("https://raw.githubusercontent.com/katerabinowitz/CEX-Cities/master/MSA-CEX-prop.csv", type, function(error, data) {
  data.sort(function(a, b) { return b.EatIn - a.EatIn; });
  x.domain(data.map(function(d) {return d.City; }));
  y.domain([0, d3.max(data, function(d) { return d.EatIn; })]);

  cex.append("g")
      .attr("class", "x axis")
      .attr("transform", "translate(0," + height + ")")
      .call(xAxis)
      .selectAll("text")
      .attr("y", 0)
      .attr("x", 9)
      .attr("dy", ".05em")
      .attr("transform", "rotate(50)")
      .style("text-anchor", "start");;
  cex.append("g")
      .attr("class", "y axis")
      .call(yAxis);

  cex.append("text")
        .attr('class', 'd3title')
        .attr("x", (width / 2))             
        .attr("y", 0 - margin.top/1.5)
        .attr("text-anchor", "middle")  
        .text("Eating In, Percent of Annual Expenditure");

  cex.append("text")
        .attr('class', 'd3subtitle')
        .attr("x", (width / 2))             
        .attr("y", 0 - (margin.top / 3))
        .attr("text-anchor", "middle")  
        .text("Hover for the actual amount spent");

  cex.append("text")
    .attr("text-anchor", "end")
    .attr("y", 9)
    .attr("dy", "-4.5em")
    .attr("transform", "rotate(-90)")
        .text("% of Annual Expenditure");

  cex.selectAll(".bar")
    .data(data)
    .enter()
    .append("rect")
      .attr("class", "bar")
      .style("fill", function(d, i){return d.City=="Washington, DC"?"orange":"#53CFCF";})
      .attr("x", function(d) { return x(d.City); })
      .attr("y", function(d) { return y(d.EatIn); })
      .attr("height", function(d) { return height - y(d.EatIn); })
      .attr("width", x.rangeBand())
      .on('mouseover', tip.show)
      .on('mouseout', tip.hide)
         
});
function type(d) {
  d.EatIn = +d.EatIn;
  return d;
}
function EatOutData() {
     d3.csv("https://raw.githubusercontent.com/katerabinowitz/CEX-Cities/master/MSA-CEX-prop.csv", function(error, data) {
      data.sort(function(a, b) { return b.EatOut - a.EatOut; });
      x.domain(data.map(function(d) { console.log(d); return d.City; }));
      y.domain([0, d3.max(data, function(d) { return d.EatOut; })]);

      var tip = d3.tip()
        .attr('class', 'd3-tip')
        .offset([-10, 0])
        .html(function(d) {
        return "<strong>Eating Out: $</strong> <span>" + d.FoodAwayFromHome + "</span>";
        })

    cex.call(tip);
      
    var sel = cex.selectAll("rect")
         .data(data);
    sel.exit().remove();
    d3.select(".y.axis").remove();
    d3.select(".x.axis").remove();
    d3.select(".d3title").remove();
    sel.enter().append("rect")
      sel.attr("class", "bar")
      sel.attr("x", function(d) { return x(d.City); })
      sel.attr("y", function(d) { return y(d.EatOut); })
      sel.attr("height", function(d) { return height - y(d.EatOut); })
      .style("fill", function(d, i){return d.City=="Washington, DC"?"orange":"#53CFCF";})
      .on('mouseover', tip.show)
      .on('mouseout', tip.hide)

    cex.append("g")
      .attr("class", "y axis")
      .call(yAxis);

    cex.append("g")
      .attr("class", "x axis")
      .attr("transform", "translate(0," + height + ")")
      .call(xAxis)
      .selectAll("text")
      .attr("y", 0)
      .attr("x", 9)
      .attr("dy", "0.5em")
      .attr("transform", "rotate(50)")
      .style("text-anchor", "start");;

      cex.append("text")
        .attr('class', 'd3title')
        .attr("x", (width / 2))             
        .attr("y", 0 - (margin.top/1.5))
        .attr("text-anchor", "middle")  
        .attr("font-family", "sans-serif")
        .attr("font-size", "20px")       
        .attr("fill", "gray")
        .text("Eating Out, Percent of Annual Expenditure");

function type(d) {
d.EatOut = +d.EatOut;
return d;}
}
)};

function AlcData() {
    d3.csv("https://raw.githubusercontent.com/katerabinowitz/CEX-Cities/master/MSA-CEX-prop.csv", function(error, data) {
      data.sort(function(a, b) { return b.Alcohol - a.Alcohol; });
      x.domain(data.map(function(d) { console.log(d); return d.City; }));
      y.domain([0, d3.max(data, function(d) { return d.Alcohol; })]);

      var tip = d3.tip()
        .attr('class', 'd3-tip')
        .offset([-10, 0])
        .html(function(d) {
        return "<strong>Alcohol: $</strong> <span>" + d.Alcoholic + "</span>";
        })

    cex.call(tip);
      
    var sel = cex.selectAll("rect")
         .data(data);
    sel.exit().remove();
    d3.select(".y.axis").remove();
    d3.select(".x.axis").remove();
    d3.select(".d3title").remove();
    sel.enter().append("rect")
      sel.attr("class", "bar")
      sel.attr("x", function(d) { return x(d.City); })
      sel.attr("y", function(d) { return y(d.Alcohol); })
      sel.attr("height", function(d) { return height - y(d.Alcohol); })
      .style("fill", function(d, i){return d.City=="Washington, DC"?"orange":"#53CFCF";})
      .on('mouseover', tip.show)
      .on('mouseout', tip.hide)

    cex.append("g")
      .attr("class", "y axis")
      .call(yAxis);

    cex.append("g")
      .attr("class", "x axis")
      .attr("transform", "translate(0," + height + ")")
      .call(xAxis)
      .selectAll("text")
      .attr("y", 0)
      .attr("x", 9)
      .attr("dy", ".05em")
      .attr("transform", "rotate(50)")
      .style("text-anchor", "start");;

    cex.append("text")
        .attr('class', 'd3title')
        .attr("x", (width / 2))             
        .attr("y", 0 - (margin.top/1.5))
        .attr("text-anchor", "middle")  
        .attr("font-family", "sans-serif")
        .attr("font-size", "20px")       
        .attr("fill", "gray")
        .text("Alcohol, Percent of Annual Expenditure");

function type(d) {
d.Alcohol = +d.Alcohol;
return d;}
}
)};

function tobaccoData() {
    d3.csv("https://raw.githubusercontent.com/katerabinowitz/CEX-Cities/master/MSA-CEX-prop.csv", function(error, data) {
      data.sort(function(a, b) { return b.Smoke- a.Smoke; });
      x.domain(data.map(function(d) { console.log(d); return d.City; }));
      y.domain([0, d3.max(data, function(d) { return d.Smoke; })]);

      var tip = d3.tip()
        .attr('class', 'd3-tip')
        .offset([-10, 0])
        .html(function(d) {
        return "<strong>Smoking: $</strong> <span>" + d.Tobacco + "</span>";
        })

    cex.call(tip);
      
    var sel = cex.selectAll("rect")
         .data(data);
    sel.exit().remove();
    d3.select(".y.axis").remove();
    d3.select(".x.axis").remove();
    d3.select(".d3title").remove();
    sel.enter().append("rect")
      sel.attr("class", "bar")
      sel.attr("x", function(d) { return x(d.City); })
      sel.attr("y", function(d) { return y(d.Smoke); })
      sel.attr("height", function(d) { return height - y(d.Smoke); })
      .style("fill", function(d, i){return d.City=="Washington, DC"?"orange":"#53CFCF";})
      .on('mouseover', tip.show)
      .on('mouseout', tip.hide)

    cex.append("g")
      .attr("class", "y axis")
      .call(yAxis);

    cex.append("g")
      .attr("class", "x axis")
      .attr("transform", "translate(0," + height + ")")
      .call(xAxis)
      .selectAll("text")
      .attr("y", 0)
      .attr("x", 9)
      .attr("dy", ".05em")
      .attr("transform", "rotate(50)")
      .style("text-anchor", "start");;

      cex.append("text")
        .attr('class', 'd3title')
        .attr("x", (width / 2))             
        .attr("y", 0 - (margin.top/1.5))
        .attr("text-anchor", "middle")  
        .attr("font-family", "sans-serif")
        .attr("font-size", "20px")       
        .attr("fill", "gray")
        .text("Smoking(Tobacco), Percent of Annual Expenditure");
function type(d) {
d.Smoke = +d.Smoke;
return d;}
}
)};
function ptranData() {
    d3.csv("https://raw.githubusercontent.com/katerabinowitz/CEX-Cities/master/MSA-CEX-prop.csv", function(error, data) {
      data.sort(function(a, b) { return b.PTravel - a.PTravel; });
      x.domain(data.map(function(d) { console.log(d); return d.City; }));
      y.domain([0, d3.max(data, function(d) { return d.PTravel; })]);

    var tip = d3.tip()
        .attr('class', 'd3-tip')
        .offset([-10, 0])
        .html(function(d) {
        return "<strong>Public transit: $</strong> <span>" + d.Public + "</span>";
        })

    cex.call(tip);
      
    var sel = cex.selectAll("rect")
         .data(data);
    sel.exit().remove();
    d3.select(".y.axis").remove();
    d3.select(".x.axis").remove();
    d3.select(".d3title").remove();
    sel.enter().append("rect")
      sel.attr("class", "bar")
      sel.attr("x", function(d) { return x(d.City); })
      sel.attr("y", function(d) { return y(d.PTravel); })
      sel.attr("height", function(d) { return height - y(d.PTravel); })
      .style("fill", function(d, i){return d.City=="Washington, DC"?"orange":"#53CFCF";})
      .on('mouseover', tip.show)
      .on('mouseout', tip.hide)

    cex.append("g")
      .attr("class", "y axis")
      .call(yAxis);

    cex.append("g")
      .attr("class", "x axis")
      .attr("transform", "translate(0," + height + ")")
      .call(xAxis)
      .selectAll("text")
      .attr("y", 0)
      .attr("x", 9)
      .attr("dy", ".05em")
      .attr("transform", "rotate(50)")
      .style("text-anchor", "start");;

    cex.append("text")
        .attr('class', 'd3title')
        .attr("x", (width / 2))             
        .attr("y", 0 - (margin.top/1.5))
        .attr("text-anchor", "middle")  
        .attr("font-family", "sans-serif")
        .attr("font-size", "20px")       
        .attr("fill", "gray")
        .text("Public Transit, Percent of Annual Expenditure");

function type(d) {
d.PTravel = +d.PTravel;
return d;}
}
)};

function carData() {
    d3.csv("https://raw.githubusercontent.com/katerabinowitz/CEX-Cities/master/MSA-CEX-prop.csv", function(error, data) {
      data.sort(function(a, b) { return b.Car - a.Car; });
      x.domain(data.map(function(d) { console.log(d); return d.City; }));
      y.domain([0, d3.max(data, function(d) { return d.Car; })]);

    var tip = d3.tip()
        .attr('class', 'd3-tip')
        .offset([-10, 0])
        .html(function(d) {
        return "<strong>Car expenses: $</strong> <span>" + d.CarCosts + "</span>";
        })

    cex.call(tip);
      
    var sel = cex.selectAll("rect")
         .data(data);
    sel.exit().remove();
    d3.select(".y.axis").remove();
    d3.select(".x.axis").remove();
    d3.select(".d3title").remove();
    sel.enter().append("rect")
      sel.attr("class", "bar")
      sel.attr("x", function(d) { return x(d.City); })
      sel.attr("y", function(d) { return y(d.Car); })
      sel.attr("height", function(d) { return height - y(d.Car); })
      .style("fill", function(d, i){return d.City=="Washington, DC"?"orange":"#53CFCF";})
      .on('mouseover', tip.show)
      .on('mouseout', tip.hide)

    cex.append("g")
      .attr("class", "y axis")
      .call(yAxis);

    cex.append("g")
      .attr("class", "x axis")
      .attr("transform", "translate(0," + height + ")")
      .call(xAxis)
      .selectAll("text")
      .attr("y", 0)
      .attr("x", 9)
      .attr("dy", ".05em")
      .attr("transform", "rotate(50)")
      .style("text-anchor", "start");;

    cex.append("text")
        .attr('class', 'd3title')
        .attr("x", (width / 2))             
        .attr("y", 0 - (margin.top/1.5))
        .attr("text-anchor", "middle")  
        .attr("font-family", "sans-serif")
        .attr("font-size", "20px")       
        .attr("fill", "gray")
        .text("Car Costs, Percent of Annual Expenditure");

function type(d) {
d.Car = +d.Car;
return d;}
}
)};
function lookData() {
    d3.csv("https://raw.githubusercontent.com/katerabinowitz/CEX-Cities/master/MSA-CEX-prop.csv", function(error, data) {
      data.sort(function(a, b) { return b.Look - a.Look; });
      x.domain(data.map(function(d) { console.log(d); return d.City; }));
      y.domain([0, d3.max(data, function(d) { return d.Look; })]);

    var tip = d3.tip()
        .attr('class', 'd3-tip')
        .offset([-10, 0])
        .html(function(d) {
        return "<strong>Personal Care: $</strong> <span>" + d.PersonalCare + "</span>";
        })

    cex.call(tip);
      
    var sel = cex.selectAll("rect")
         .data(data);
    sel.exit().remove();
    d3.select(".y.axis").remove();
    d3.select(".x.axis").remove();
    d3.select(".d3title").remove();
    sel.enter().append("rect")
      sel.attr("class", "bar")
      sel.attr("x", function(d) { return x(d.City); })
      sel.attr("y", function(d) { return y(d.Look); })
      sel.attr("height", function(d) { return height - y(d.Look); })
      .style("fill", function(d, i){return d.City=="Washington, DC"?"orange":"#53CFCF";})
      .on('mouseover', tip.show)
      .on('mouseout', tip.hide)

    cex.append("g")
      .attr("class", "y axis")
      .call(yAxis);

    cex.append("g")
      .attr("class", "x axis")
      .attr("transform", "translate(0," + height + ")")
      .call(xAxis)
      .selectAll("text")
      .attr("y", 0)
      .attr("x", 9)
      .attr("dy", ".05em")
      .attr("transform", "rotate(50)")
      .style("text-anchor", "start");;

      cex.append("text")
        .attr('class', 'd3title')
        .attr("x", (width / 2))             
        .attr("y", 0 - (margin.top/1.5))
        .attr("text-anchor", "middle")  
        .attr("font-family", "sans-serif")
        .attr("font-size", "20px")       
        .attr("fill", "gray")
        .text("Hygiene and Beauty, Percent of Annual Expenditure");

function type(d) {
d.Look = +d.Look;
return d;}
}
)};

function dressData() {
    d3.csv("https://raw.githubusercontent.com/katerabinowitz/CEX-Cities/master/MSA-CEX-prop.csv", function(error, data) {
      data.sort(function(a, b) { return b.Dress - a.Dress; });
      x.domain(data.map(function(d) { console.log(d); return d.City; }));
      y.domain([0, d3.max(data, function(d) { return d.Dress; })]);

      var tip = d3.tip()
        .attr('class', 'd3-tip')
        .offset([-10, 0])
        .html(function(d) {
        return "<strong>Apparel: $</strong> <span>" + d.Apparel + "</span>";
        })

    cex.call(tip);
      
    var sel = cex.selectAll("rect")
         .data(data);
    sel.exit().remove();
    d3.select(".y.axis").remove();
    d3.select(".x.axis").remove();
    d3.select(".d3title").remove();
    sel.enter().append("rect")
      sel.attr("class", "bar")
      sel.attr("x", function(d) { return x(d.City); })
      sel.attr("y", function(d) { return y(d.Dress); })
      sel.attr("height", function(d) { return height - y(d.Dress); })
      .style("fill", function(d, i){return d.City=="Washington, DC"?"orange":"#53CFCF";})
      .on('mouseover', tip.show)
      .on('mouseout', tip.hide)

    cex.append("g")
      .attr("class", "y axis")
      .call(yAxis);

    cex.append("g")
      .attr("class", "x axis")
      .attr("transform", "translate(0," + height + ")")
      .call(xAxis)
      .selectAll("text")
      .attr("y", 0)
      .attr("x", 9)
      .attr("dy", ".05em")
      .attr("transform", "rotate(50)")
      .style("text-anchor", "start");;

      cex.append("text")
        .attr('class', 'd3title')
        .attr("x", (width / 2))             
        .attr("y", 0 - (margin.top/1.5))
        .attr("text-anchor", "middle")  
        .attr("font-family", "sans-serif")
        .attr("font-size", "20px")       
        .attr("fill", "gray")
        .text("Apparel, Percent of Annual Expenditure");

function type(d) {
d.Dress = +d.Dress;
return d;}
}
)};

function entData() {
    d3.csv("https://raw.githubusercontent.com/katerabinowitz/CEX-Cities/master/MSA-CEX-prop.csv", function(error, data) {
      data.sort(function(a, b) { return b.Ent - a.Ent; });
      x.domain(data.map(function(d) { console.log(d); return d.City; }));
      y.domain([0, d3.max(data, function(d) { return d.Ent; })]);

      var tip = d3.tip()
        .attr('class', 'd3-tip')
        .offset([-10, 0])
        .html(function(d) {
        return "<strong>Entertainment: $</strong> <span>" + d.Entertainment + "</span>";
        })

    cex.call(tip);
      
    var sel = cex.selectAll("rect")
         .data(data);
    sel.exit().remove();
    d3.select(".y.axis").remove();
    d3.select(".x.axis").remove();
    d3.select(".d3title").remove();
    sel.enter().append("rect")
      sel.attr("class", "bar")
      sel.attr("x", function(d) { return x(d.City); })
      sel.attr("y", function(d) { return y(d.Ent); })
      sel.attr("height", function(d) { return height - y(d.Ent); })
      .style("fill", function(d, i){return d.City=="Washington, DC"?"orange":"#53CFCF";})
      .on('mouseover', tip.show)
      .on('mouseout', tip.hide)

    cex.append("g")
      .attr("class", "y axis")
      .call(yAxis);

    cex.append("g")
      .attr("class", "x axis")
      .attr("transform", "translate(0," + height + ")")
      .call(xAxis)
      .selectAll("text")
      .attr("y", 0)
      .attr("x", 9)
      .attr("dy", ".05em")
      .attr("transform", "rotate(50)")
      .style("text-anchor", "start");;

    cex.append("text")
        .attr('class', 'd3title')
        .attr("x", (width / 2))             
        .attr("y", 0 - (margin.top/1.5))
        .attr("text-anchor", "middle")  
        .attr("font-family", "sans-serif")
        .attr("font-size", "20px")       
        .attr("fill", "gray")
        .text("Entertainment, Percent of Annual Expenditure");

function type(d) {
d.Ent = +d.Ent;
return d;}
}
)};

function rData() {
    d3.csv("https://raw.githubusercontent.com/katerabinowitz/CEX-Cities/master/MSA-CEX-prop.csv", function(error, data) {
      data.sort(function(a, b) { return b.ReadR - a.ReadR; });
      x.domain(data.map(function(d) { console.log(d); return d.City; }));
      y.domain([0, d3.max(data, function(d) { return d.ReadR; })]);

      var tip = d3.tip()
        .attr('class', 'd3-tip')
        .offset([-10, 0])
        .html(function(d) {
        return "<strong>Reading: $</strong> <span>" + d.Reading + "</span>";
        })

    cex.call(tip);
      
    var sel = cex.selectAll("rect")
         .data(data);
    sel.exit().remove();
    d3.select(".y.axis").remove();
    d3.select(".x.axis").remove();
    d3.select(".d3title").remove();
    sel.enter().append("rect")
      sel.attr("class", "bar")
      sel.attr("x", function(d) { return x(d.City); })
      sel.attr("y", function(d) { return y(d.ReadR); })
      sel.attr("height", function(d) { return height - y(d.ReadR); })
      .style("fill", function(d, i){return d.City=="Washington, DC"?"orange":"#53CFCF";})
      .on('mouseover', tip.show)
      .on('mouseout', tip.hide)

    cex.append("g")
      .attr("class", "y axis")
      .call(yAxis);

    cex.append("g")
      .attr("class", "x axis")
      .attr("transform", "translate(0," + height + ")")
      .call(xAxis)
      .selectAll("text")
      .attr("y", 0)
      .attr("x", 9)
      .attr("dy", ".05em")
      .attr("transform", "rotate(50)")
      .style("text-anchor", "start");;

    cex.append("text")
        .attr('class', 'd3title')
        .attr("x", (width / 2))             
        .attr("y", 0 - (margin.top/1.5))
        .attr("text-anchor", "middle")  
        .attr("font-family", "sans-serif")
        .attr("font-size", "20px")       
        .attr("fill", "gray")
        .text("Reading, Percent of Annual Expenditure");

function type(d) {
d.ReadR = +d.ReadR;
return d;}
}
)};
</script>
</div>
    <p class='graph-subtitle'>Source: Bureau of Labor Statistics Consumer Expenditure Survey.</p>   
</div>

<div class='col-sm-3 side'>
  <ul class="sidebar nav nav-stacked fixed">
    <br>
        <li>Recent</li>
        <ul><ul class="nav nav-stacked fixed insidebar">
            <li><a href='./rentReports.html'>Those DC Rent Reports? Take with a Grain of Salt</a></li>
            <li><a href='./wageRelative.html'>DC's Expensive, but that's not the Whole Story</a></li>
            <li><a href='./dcHomeChars.html'>Charting the Divide in New and Old DC Homes</a></li>
            <li><a href='./nightlife-neighborhoods.html'>The Changing Geography of DC Nightlife</a></li>
            <li><a href='./another-brick.html'>Another Brick in the Ward</a></li>
            <li><a href='./biketoWork2016.html'>Bike to Work Day: By the Numbers</a></li>
            <!---<li><a href='./parking-tickets-by-state.html'>Maryland Drivers Receive Most DC Parking Tickets</a></li>
            <li><a href='./school-facilities.html'>Shining a Light on DC's Multi-Billion Dollar School Modernization</a></li>
            <li><a href='./metro-ridership.html'>Charting Metro's Ridership Decline</a></li>
            <li><a href='./uber-surge-time.html'>When Does Uber Surge Near You?</a></li>
            <li><a href='./who-moves-to-DC.html'>Who Moves to DC?</a></li>
            <li><a href='./construction-boom-mapped.html'>Mapped: DC's Construction Boom</a></li>
            <li><a href='./drizly-neighborhood-favorites.html'>DC's Favorite Booze in the App Economy</a></li>
            <li><a href='./DC-region-breweries.html'>DC Region has 70 Breweries, Second Most on East Coast</a><li>
            <li><a href='./has-wmata-bottomed-out.html'>Has Metro Bottomed Out?</a></li>
            <li><a href='./rise-of-biking.html'>The Rise of Biking in DC, Visualized</a></li>
            <li><a href='./airbnb-listings-in-DC.html'>DC #3 in Airbnb Per Capita</a></li>
            <li><a href='./dc-property-flipping.html'>The Most House-Flipped DC Neighborhoods</a></li>
            <li><a href='./how-DC-spends.html'>How the DC Region Spends</a></li>
            <li><a href='./dc-hack-landmark.html'>DC Hack: Landmark</a></li>
            <li><a href='./DDD-in-DC.html'>What's Guy Fieri's Problem with DC?</a></li>
            <li><a href='./gentrification-by-numbers.html'>DC Gentrification by the Numbers</a></li>
            <li><a href='./farmers-mkt-per-capita.html'>DC #1 in Farmer's Markets per Capita</a></li>
            <li><a href='./10-year-dc-development.html'>DC Adding 15M+ Sq Ft in Next 10 Years</a></li>
            <li><a href='./your-commute-is-getting-worse.html'>Your Metro Commute is Getting Worse</a></li>
            <li><a href='./migration-comparison.html'>DC: The East Coast's Most Migratory City</a></li>
            <li><a href='./welcome-to-datalensdc.html'>Welcome to DataLensDC!</a></li> -->
        </ul></ul> 
        <li class="archiveside"><a href="./archive.html"><p style="margin-left:15px">Archive</p></a></li>
        <br>
        <li>Connect</li>  
        <ul><ul class="nav nav-stacked fixed connectbar">
              <li><a href="mailto:datalensdc@gmail.com" target="_blank"> <i class="fa fa-envelope"></i> send an email</a></li>
              <li><a href="https://twitter.com/DataLensDC" target="_blank"><i class="fa fa-twitter"></i> tweet our way</a></li>
              <li><a href="https://github.com/katerabinowitz" target="_blank"><i class="fa fa-github"></i> git at us</a></li>
              <!-- <li><a href="https://www.linkedin.com/pub/kate-rabinowitz/3b/b30/168" target="_blank"><i class="fa fa-linkedin"></i> link up</a></li> -->
          </ul></ul>
      </ul>
    </div>    
</div>
</body>
</html>