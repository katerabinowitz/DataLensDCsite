<!DOCTYPE html>
<html lang="en">
<head>
<meta name="viewport" content="width=device-width, initial-scale=1" charset="utf-8">
  <title>DC Region's 70 Breweries</title>

  <link rel="stylesheet" href="http://maxcdn.bootstrapcdn.com/bootstrap/3.3.4/css/bootstrap.min.css">
  <link rel="stylesheet" href="http://maxcdn.bootstrapcdn.com/font-awesome/4.3.0/css/font-awesome.min.css">
  <link href='http://fonts.googleapis.com/css?family=Neuton:400,700' rel='stylesheet' type='text/css'>

  <link href='./CSS/main.css' rel='stylesheet' type='text/css'>
  <link href='./CSS/breweries-cbsa.css' rel='stylesheet' type='text/css'>

  <script src="http://ajax.googleapis.com/ajax/libs/jquery/1.11.2/jquery.min.js"></script>
  <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.4/js/bootstrap.min.js"></script>
  <script src="http://d3js.org/d3.v3.min.js"></script> 

<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-65753381-1', 'auto');
  ga('send', 'pageview');

</script>
</head>

<body>
<nav class="xsheader navbar navbar-default navbar-static-top">
  <div class='clearfix xsheader'>      
        <button type="button" class="navbar-toggle" data-toggle="collapse" data-target=".navbar-collapse">
          <span class="sr-only">Toggle navigation</span>
          <span class="mybar icon-bar"></span>
          <span class="mybar icon-bar"></span>
          <span class="mybar icon-bar"></span> 
        </button>
        <a class="navbar-brand" href="./index.html">
          <img src="./Images/DataLensDCResponsiveLogo2.png" alt="DataLensDC">  
        </a>
      <ul class="navbar-nav navbar-custom navbar-static-top navbar-collapse collapse dropdown-pull-right" id="main-navbar-custom">
        <li><a href="./about.html">About</a></li>
        <li><a href="./subscribe.html">Subscribe</a></li>
        <li><a href="./archive.html">Archive</a></li>
        <li class="dropdown"><a class="dropdown-toggle" href='#' data-toggle='dropdown'>Connect<span class='caret'></span></a>
          <ul class="navbar-custom dropmenu dropdown-menu dropdown-pull-right">
            <li><a href="mailto:datalensdc@gmail.com" target="_blank"> <i class="fa fa-envelope"></i> send an email</a></li>
            <li><a href="https://twitter.com/DataLensDC" target="_blank"><i class="fa fa-twitter"></i> tweet our way</a></li>
            <li><a href="https://github.com/katerabinowitz" target="_blank"><i class="fa fa-github"></i> git at us</a></li>
            <!-- <li><a href="https://www.linkedin.com/pub/kate-rabinowitz/3b/b30/168" target="_blank"><i class="fa fa-linkedin"></i> link up</a></li>  -->     
          </ul>
        </li>
      </ul>
  </div>
</nav>

<nav class="smheader navbar navbar-default navbar-static-top">
<a href="./index.html"><img class="logo" src="./Images/DataLensDC logo.png" alt="DataLensDC"></a>
  <div class="navbar-fixed">
    <ul class ="headerlist">
        <li><a href="./about.html">about</a></li>
        <li><a href="./subscribe.html">subscribe</a></li>
        <li><a href="mailto:datalensdc@gmail.com">email</a></li>
    </ul>
  </div>
</nav>

<div class='content row'>
  <div class='col-sm-9 col-xs-12'>
  <br>
    <h2><a href='./DC-region-breweries.html'>The DC Region has 70 Breweries, Second Most on the East Coast.<br>Here they are mapped.</a></h2>
    <hr id='top-line'>
    <h3> Kate Rabinowitz // January 12, 2016</h3>
     <p class='content'>Few aspects of DC’s drinking and dining scenes have changed as much in the past five years as beer production. Local breweries were sparse when I first moved to the District. But that started changing in 2011 with the founding of companies like DC Brau, the first DC-based brewery in over 50 years, and Port City Brewing Company, the Alexandria’s first production brewery since Prohibition. Since then, microbreweries and brewpubs have proliferated across the region, just as they have across the rest of the United States. There were 4,144 breweries operating nationwide at the end of 2015 according to the Brewers Association, nearly three times as many as there were in 2008. But how does Washington’s brew scene compare to other metropolitan areas?</p>

    <div class="btn-content">
    <input type="button" name="Plan" value="Current and planned breweries" onclick="showPlan()" class="updatebtn"/>
    <input type="button" name="Current" value="Current breweries" onclick="showCurrent()" class="updatebtn"/>
    </div>

    <script>
    function showPlan() {
    $("#brewbar").hide();
   document.getElementById('brewbar2').style.display = "block";
    }
    function showCurrent() {
    $("#brewbar2").hide();
   document.getElementById('brewbar').style.display = "block";
    }
    </script>

    <p class='graph-title'>DC Region ranks high among East Coast cities for local brews,<br>but still has a ways to go nationally</p>
    <p class='graph-subtitle'> Number of breweries by type per urban region</p>
      <div id="brewbar">
      <svg class="brew"></svg>
      <script type="text/javascript">
      (function() {
      var chartWidth       = 275,
        barHeight        = 25,
        gapBetweenGroups = 30,
        spaceForLabels   = 100;
        axisHeight       = 7;

      d3.csv("https://raw.githubusercontent.com/katerabinowitz/Breweries/master/brewTSum.csv", function(error, data) {
        if (error) throw error;

        var color = d3.scale.ordinal()
            .range(["#b3e2cd", "#fdcdac", "#cbd5e8", "#f4cae4"]);

            color.domain(d3.keys(data[0]).filter(function(key) { return key !== "Place"; }));

      data.forEach(function(d) {
            var x0 = 0;
            d.types = color.domain().map(function(name) { return {name: name, x0: x0, x1: x0 += +d[name]}; });
            d.total = d.types[d.types.length-1].x1;
            });

      data.sort(function(a, b) { return b.total - a.total; });

      var chartHeight = (barHeight * 21) + axisHeight;

      var y = d3.scale.linear()
      .range([chartHeight + gapBetweenGroups, 0]);

      var yAxis = d3.svg.axis()
        .scale(y)
        .tickFormat('')
        .tickSize(0)
        .orient("left");

      var x = d3.scale.linear()
        .range([0, chartWidth]);

      var xAxis = d3.svg.axis()
        .scale(x)
        .orient("bottom");

      y.domain(data.map(function(d) { return d.Place; }));
      x.domain([0, d3.max(data, function(d) { return d.total; })]);
      
      var brew = d3.select(".brew")
        .attr("width", spaceForLabels + chartWidth + 70)
        .attr("height", chartHeight);

      var bar = brew.selectAll("g")
        .data(data)
        .enter().append("g")
        .attr("class", "bar")
        .attr("transform", function(d, i) {
        return "translate(" + spaceForLabels + "," + (i * barHeight + gapBetweenGroups * (0.5 + Math.floor(i/data.length))) + ")";
    });

      bar.selectAll("rect")
        .data(function(d) { return d.types; })
      .enter().append("rect")
        .attr("height", barHeight - 1)
        .attr("x", function(d) { return x(d.x0); })
        .attr("width", function(d) { return x(d.x1) - x(d.x0); })
        .style("fill", function(d) { return color(d.name); });

    bar.append("text")
      .attr("class", "label")
      .attr("x", function(d) {return - 100; })
      .attr("y", barHeight/2)
      .attr("dy", ".1em")
      .text(function(d) { return d.Place; });

    bar.append("g")
      .attr("class", "y axis")
      .attr("transform", "translate(" + spaceForLabels + ", " + -gapBetweenGroups/2 + ")")
      .call(yAxis);

      bar.append("g")
      .attr("class", "Xaxis")
      .attr("transform", "translate(" + 0 + "," + (chartHeight - 32) + ")")
      .call(xAxis);

      var legend = brew.selectAll(".legend")
        .data(color.domain().slice().reverse())
        .enter().append("g")
        .attr("class", "legend")
        .attr("transform", function (d, i) {
          return "translate(0," + i * 20 + ")";
      });

      legend.append("rect")
        .attr("x", chartWidth + 75)
        .attr("y", chartHeight - 460)
        .attr("width", 18)
        .attr("height", 18)
        .style("fill", color);

      legend.append("text")
        .attr("x", chartWidth + 95)
        .attr("y", chartHeight - 450)
        .attr("dy", ".35em")
        // .style("text-anchor", "end")
        .text(function (d) {
          return d;
      });
          });
})();
</script>
    <p class='graph-subtitle'> Source: Brewers Association.</p>
  </div>

  <div id="brewbar2" style="display:none">
      <svg class="brew2"></svg>
      <script type="text/javascript">
      var chartWidth       = 275,
        barHeight        = 25,
        gapBetweenGroups = 30,
        spaceForLabels   = 100;
        axisHeight       = 7;

        var color = d3.scale.ordinal()
            .range(["#b3e2cd", "#fdcdac", "#cbd5e8", "#f4cae4", "#cccccc"]);

      d3.csv("https://raw.githubusercontent.com/katerabinowitz/Breweries/master/currentNPlan.csv", function(error, data) {
        if (error) throw error;

            color.domain(d3.keys(data[0]).filter(function(key) { return key !== "Place"; }));

      data.forEach(function(d) {
            var x0 = 0;
            d.types = color.domain().map(function(name) { return {name: name, x0: x0, x1: x0 += +d[name]}; });
            d.total = d.types[d.types.length-1].x1;
            });

      data.sort(function(a, b) { return b.total - a.total; });

      var chartHeight = (barHeight * 21) + axisHeight;

      var y = d3.scale.linear()
      .range([chartHeight + gapBetweenGroups, 0]);

      var yAxis = d3.svg.axis()
        .scale(y)
        .tickFormat('')
        .tickSize(0)
        .orient("left");

      var x = d3.scale.linear()
        .range([0, chartWidth]);

      var xAxis = d3.svg.axis()
        .scale(x)
        .orient("bottom");

      y.domain(data.map(function(d) { return d.Place; }));
      x.domain([0, d3.max(data, function(d) { return d.total; })]);
      
      var brew2 = d3.select(".brew2")
        .attr("width", spaceForLabels + chartWidth + 70)
        .attr("height", chartHeight);

      var bar2 = brew2.selectAll("g")
        .data(data)
        .enter().append("g")
        .attr("class", "bar")
        .attr("transform", function(d, i) {
        return "translate(" + spaceForLabels + "," + (i * barHeight + gapBetweenGroups * (0.5 + Math.floor(i/data.length))) + ")";
    });

      bar2.selectAll("rect")
        .data(function(d) { return d.types; })
      .enter().append("rect")
        .attr("height", barHeight - 1)
        .attr("x", function(d) { return x(d.x0); })
        .attr("width", function(d) { return x(d.x1) - x(d.x0); })
        .style("fill", function(d) { return color(d.name); });

    bar2.append("text")
      .attr("class", "label")
      .attr("x", function(d) {return - 100; })
      .attr("y", barHeight/2)
      .attr("dy", ".1em")
      .text(function(d) { return d.Place; });

    bar2.append("g")
      .attr("class", "y axis")
      .attr("transform", "translate(" + spaceForLabels + ", " + -gapBetweenGroups/2 + ")")
      .call(yAxis);

      bar2.append("g")
      .attr("class", "Xaxis")
      .attr("transform", "translate(" + 0 + "," + (chartHeight - 32) + ")")
      .call(xAxis);

      var legend2 = brew2.selectAll(".legend")
        .data(color.domain().slice().reverse())
        .enter().append("g")
        .attr("class", "legend")
        .attr("transform", function (d, i) {
          return "translate(0," + i * 20 + ")";
      });

      legend2.append("rect")
        .attr("x", chartWidth + 75)
        .attr("y", chartHeight - 460)
        .attr("width", 18)
        .attr("height", 18)
        .style("fill", color);

      legend2.append("text")
        .attr("x", chartWidth + 95)
        .attr("y", chartHeight - 450)
        .attr("dy", ".35em")
        // .style("text-anchor", "end")
        .text(function (d) {
          return d;
      });
          });
</script>
    <p class='graph-subtitle'> Source: Brewers Association.</p>
  </div>

<p class='content'>The DC region has the second most breweries of any East Coast city, and ranks ninth nationally. Read the rest in <a href="http://www.washingtonian.com/2016/01/12/70-breweries-around-washington-heres-map/" class="link" target="_link">my recent Washingtonian piece.</a></p>
  <br><br>
</div>
    
<div class='col-sm-3 side'>
  <ul class="sidebar nav nav-stacked fixed">
    <br>
        <li>Recent</li>
        <ul><ul class="nav nav-stacked fixed insidebar">
            <li><a href='./who-moves-to-DC.html'>Who Moves to DC?</a></li>
            <li><a href='./construction-boom-mapped.html'>Mapped: DC's Construction Boom</a></li>
            <li><a href='./drizly-neighborhood-favorites.html'>DC's Favorite Booze in the App Economy</a></li>
            <li><a href='./DC-region-breweries.html'>DC Region has 70 Breweries, Second Most on East Coast</a><li>
            <li><a href='./has-wmata-bottomed-out.html'>Has Metro Bottomed Out?</a></li>
            <li><a href='./rise-of-biking.html'>The Rise of Biking in DC, Visualized</a></li>
            <li><a href='./airbnb-listings-in-DC.html'>DC #3 in Airbnb Per Capita</a></li>
            <!---<li><a href='./dc-property-flipping.html'>The Most House-Flipped DC Neighborhoods</a></li>
            <li><a href='./how-DC-spends.html'>How the DC Region Spends</a></li>
            <li><a href='./dc-hack-landmark.html'>DC Hack: Landmark</a></li>
            <li><a href='./DDD-in-DC.html'>What's Guy Fieri's Problem with DC?</a></li>
            <li><a href='./gentrification-by-numbers.html'>DC Gentrification by the Numbers</a></li>
            <li><a href='./farmers-mkt-per-capita.html'>DC #1 in Farmer's Markets per Capita</a></li>
            <li><a href='./10-year-dc-development.html'>DC Adding 15M+ Sq Ft in Next 10 Years</a></li>
            <li><a href='./your-commute-is-getting-worse.html'>Your Metro Commute is Getting Worse</a></li>
            <li><a href='./migration-comparison.html'>DC: The East Coast's Most Migratory City</a></li>
            <li><a href='./welcome-to-datalensdc.html'>Welcome to DataLensDC!</a></li> -->
        </ul></ul> 
        <li class="archiveside"><a href="./archive.html"><p style="margin-left:15px">Archive</p></a></li>
        <br>
        <li>Connect</li>  
        <ul><ul class="nav nav-stacked fixed connectbar">
              <li><a href="mailto:datalensdc@gmail.com" target="_blank"> <i class="fa fa-envelope"></i> send an email</a></li>
              <li><a href="https://twitter.com/DataLensDC" target="_blank"><i class="fa fa-twitter"></i> tweet our way</a></li>
              <li><a href="https://github.com/katerabinowitz" target="_blank"><i class="fa fa-github"></i> git at us</a></li>
              <!-- <li><a href="https://www.linkedin.com/pub/kate-rabinowitz/3b/b30/168" target="_blank"><i class="fa fa-linkedin"></i> link up</a></li> -->
          </ul></ul>
      </ul>
    </div>    
</div>
</body>
</html>