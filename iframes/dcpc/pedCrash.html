<!DOCTYPE html>

<html lang="en">
<head>
<meta name="viewport" content="width=device-width, initial-scale=1" charset="utf-8">
  <title>DMV Migration</title>

  <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.4/css/bootstrap.min.css">
  <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/font-awesome/4.3.0/css/font-awesome.min.css">
  <link href='https://fonts.googleapis.com/css?family=Neuton:400,700' rel='stylesheet' type='text/css'>

  <script src="http://d3js.org/d3.v3.min.js" charset="utf-8"></script>
  <link href="https://fonts.googleapis.com/css?family=Montserrat|Montserrat:600" rel="stylesheet">

<style>
body {
    background-color:#FFFFFF;
    font-family: Montserrat, sans-serif;
    font-size: 10px;
    color: #000000;
}

.group-tick line {
  stroke: #000;
}

.ribbons {
  fill-opacity: 0.67;
}

.graph-title{
      font-size: 18px;
      font-weight: 600;
      text-align:left;
      padding-left:20px;
  }

.graph-subtitle {
      text-align:left;
      padding-left:20px;
}

div.tooltip {
  position: absolute;
  text-align: left;
  width: 275px;
  height: 40px;
  padding: 60px 0 0 20px;
  border: 0px;
  border-radius: 8px;
  pointer-events:none;
  font-family: Montserrat, sans-serif;
  font-size: 10px;
  color: #000000;
}

</style>
</head>
<body>

<p class="graph-title">On Net, DC Residents Moving to Maryland</p>
<p class="graph-subtitle">Migration flows of residents that move within the DC region</p>


<svg width="520" height="520"></svg>

<script>
// set projection
var projection = d3.geo.mercator();

// create path variable
var path = d3.geo.path()
    .projection(projection);


d3.json("us.json", function(error, topo) { console.log(topo);

    states = topojson.feature(topo, topo.objects.states).features

    // set projection parameters
    projection
      .scale(1000)
      .center([-106, 37.5])

    // create svg variable
    var svg = d3.select("body").append("svg")
            .attr("width", width)
            .attr("height", height);

    // points
    aa = [-122.490402, 37.786453];
  bb = [-122.389809, 37.72728];

  console.log(projection(aa),projection(bb));

  // add states from topojson
  svg.selectAll("path")
      .data(states).enter()
      .append("path")
      .attr("class", "feature")
      .style("fill", "steelblue")
      .attr("d", path);

    // put boarder around states 
    svg.append("path")
      .datum(topojson.mesh(topo, topo.objects.states, function(a, b) { return a !== b; }))
      .attr("class", "mesh")
      .attr("d", path);

    // add circles to svg
    svg.selectAll("circle")
    .data([aa,bb]).enter()
    .append("circle")
    .attr("cx", function (d) { console.log(projection(d)); return projection(d)[0]; })
    .attr("cy", function (d) { return projection(d)[1]; })
    .attr("r", "8px")
    .attr("fill", "red")

});

</script>
    
</body>
</html>
