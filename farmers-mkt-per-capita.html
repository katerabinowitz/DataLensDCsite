<!DOCTYPE html>
<html lang="en">
<head>
<meta name="viewport" content="width=device-width, initial-scale=1" charset="utf-8">
  <title>DC #1 in Farmer's Markets per Capita</title>

  <link rel='shortcut icon' href='favicon.ico' type='image/x-icon'/>

  <link rel="stylesheet" href="http://maxcdn.bootstrapcdn.com/bootstrap/3.3.4/css/bootstrap.min.css">
  <link rel="stylesheet" href="http://maxcdn.bootstrapcdn.com/font-awesome/4.3.0/css/font-awesome.min.css">
  <link href='http://fonts.googleapis.com/css?family=Neuton:400,700' rel='stylesheet' type='text/css'>

  <link href='./CSS/main.css' rel='stylesheet' type='text/css'>
  <link href='./CSS/fm-per-capita.css' rel='stylesheet' type='text/css'>

  <script src="http://ajax.googleapis.com/ajax/libs/jquery/1.11.2/jquery.min.js"></script>
  <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.4/js/bootstrap.min.js"></script>
  <script src="http://d3js.org/d3.v3.min.js"></script> 
   <style>
  .bar {
    fill: #53CFCF;
    }
  .label{
    font: 12px sans-serif;
  }

  .axis path,
  .axis line {
    fill: none;
    stroke: #000;
    shape-rendering: crispEdges;
  }

  rect.bordered {
    stroke: #E6E6E6;
    stroke-width:2px;   
  }

  text{
    font: 9px sans-serif;
  }
</style>
  <script src="https://maps.googleapis.com/maps/api/js?key=AIzaSyDez_nj2eHP6b_mhMR1fn2Df2_jm-py41M"></script>
  <script>
    // var DC = new google.maps.LatLng(-77.0164,38.9047);
      var map;
      var infowindow = new google.maps.InfoWindow();
      var MY_MAPTYPE_ID = 'custom_style';

      function initialize() {
        var customOps = [
    {
        "featureType": "landscape",
        "stylers": [
            {"hue": "#FFBB00"},
            {"saturation": 43.400000000000006},
            {"lightness": 37.599999999999994},
            {"gamma": 1}
        ]
    },{
        "featureType": "road.highway",
        "stylers": [
            {"hue": "#FFC200"},
            {"saturation": -61.8},
            {"lightness": 45.599999999999994},
            {"gamma": 1}
        ]
    },{
        "featureType": "road.arterial",
        "stylers": [
            {"hue": "#FF0300"},
            {"saturation": -100},
            {"lightness": 51.19999999999999},
            {"gamma": 1}
        ]
    },{
        "featureType": "road.local",
        "stylers": [
            {"hue": "#FF0300"},
            {"saturation": -100},
            {"lightness": 52},
            {"gamma": 1}
        ]
    },{
      "featureType": "water",
        "stylers": [
            {"hue": "#0078FF"},
            {"saturation": -13.200000000000003},
            {"lightness": 2.4000000000000057},
            {"gamma": 1}
        ]
    },{
        "featureType": "poi",
        "stylers": [
            {"hue": "#00FF6A"},
            {"saturation": -1.0989010989011234},
            {"lightness": 11.200000000000017},
            {"gamma": 1}
        ]
    }
];
      var mapOptions = {
        zoom: 12,
        center: new google.maps.LatLng(38.8993488,-77.0145665),
        mapTypeControlOptions: {
           mapTypeIds: [google.maps.MapTypeId.ROADMAP, MY_MAPTYPE_ID]
        },
        mapTypeId: MY_MAPTYPE_ID,
        streetViewControl: false,
        panControl: false
      };
      var map = new google.maps.Map(document.getElementById('fm-dc-map'), mapOptions);
  
      var styledMapOptions= {
        name:'Custom Style'
      };
  
      var customMapType = new google.maps.StyledMapType(
        customOps,styledMapOptions
      );
    map.mapTypes.set(MY_MAPTYPE_ID,customMapType);
  
    map.data.loadGeoJson('https://raw.githubusercontent.com/katerabinowitz/DC-FoodandDrink/master/farmersMarketCompare/Output/DCFM.geojson');

    map.data.addListener('click', function(event) {
      var FMname = event.feature.getProperty("name");
      var address = event.feature.getProperty("address");
      var date = event.feature.getProperty("date");
      var time = event.feature.getProperty("time");
      infowindow.setContent("<div id='iw'> <div id='iw-title'>"+ FMname +"</div>"+ address + "<br>Open: "+ date + "<br> Day & Time: " + time + "</p></div>");
      infowindow.setPosition(event.feature.getGeometry().get());
      infowindow.setOptions({pixelOffset: new google.maps.Size(0,-30)});
      infowindow.open(map);
    }); 
    }

google.maps.event.addDomListener(window, 'load', initialize);
</script>
<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-65753381-1', 'auto');
  ga('send', 'pageview');

</script>
</head>

<body>
<nav class="xsheader navbar navbar-default navbar-static-top">
  <div class='clearfix xsheader'>      
        <button type="button" class="navbar-toggle" data-toggle="collapse" data-target=".navbar-collapse">
          <span class="sr-only">Toggle navigation</span>
          <span class="mybar icon-bar"></span>
          <span class="mybar icon-bar"></span>
          <span class="mybar icon-bar"></span> 
        </button>
        <a class="navbar-brand" href="./index.html">
          <img src="./Images/DataLensDCResponsiveLogo2.png" alt="DataLensDC">  
        </a>
      <ul class="navbar-nav navbar-custom navbar-static-top navbar-collapse collapse dropdown-pull-right" id="main-navbar-custom">
        <li><a href="./about.html">About</a></li>
        <li><a href="./subscribe.html">Subscribe</a></li>
        <li><a href="./archive.html">Archive</a></li>
        <li class="dropdown"><a class="dropdown-toggle" href='#' data-toggle='dropdown'>Connect<span class='caret'></span></a>
          <ul class="navbar-custom dropmenu dropdown-menu dropdown-pull-right">
            <li><a href="mailto:datalensdc@gmail.com" target="_blank"> <i class="fa fa-envelope"></i> send an email</a></li>
            <li><a href="https://twitter.com/DataLensDC" target="_blank"><i class="fa fa-twitter"></i> tweet our way</a></li>
            <li><a href="https://github.com/katerabinowitz" target="_blank"><i class="fa fa-github"></i> git at us</a></li>
            <!-- <li><a href="https://www.linkedin.com/pub/kate-rabinowitz/3b/b30/168" target="_blank"><i class="fa fa-linkedin"></i> link up</a></li>  -->     
          </ul>
        </li>
      </ul>
  </div>
</nav>

<nav class="smheader navbar navbar-default navbar-static-top">
<a href="./index.html"><img class="logo" src="./Images/DataLensDC logo.png" alt="DataLensDC"></a>
  <div class="navbar-fixed">
    <ul class ="headerlist">
        <li><a href="./about.html">about</a></li>
        <li><a href="./subscribe.html">subscribe</a></li>
        <li><a href="mailto:datalensdc@gmail.com">email</a></li>
    </ul>
  </div>
</nav>

<div class='content row'>
  <div class='col-sm-9 col-xs-12'>
  <br>
    <h2><a href='./farmers-mkt-per-capita.html'>DC #1 in Farmer's Markets per Capita</a></h2>
    <hr id='top-line'>
    <h3> Kate Rabinowitz // August 31, 2015 </h3>
     <p class='content'>My husband’s first words to me were basically “Where can I find a good local farmer’s market?” to which I responded MARRY ME. That's how much I like farmer's markets. I’ve been fortunate that wherever I’ve lived in the District a good farmer’s market has never been more than a short Saturday morning jaunt in warmer months. I was curious if I simply gravitated to places near markets or this was more of a universal DC experience, and how DC compared to other American cities. </p> 
    <div class="content row">
    <div class="col-md-7 col-sm-12">
    <p class='graph-title'>Farmer's Markets Per Capita in American Cities</p>
    <p class='graph-subtitle'> Number of farmer's markets per 100,000 people</p>
      <div id="rankbar">
      <svg class="rank"></svg>
      <script type="text/javascript">
      var chartWidth       = 275,
        barHeight        = 20,
        gapBetweenGroups = 40,
        spaceForLabels   = 80;

      var x = d3.scale.linear()
        .range([0, chartWidth]);

      d3.csv("https://raw.githubusercontent.com/katerabinowitz/DC-FoodandDrink/master/farmersMarketCompare/Output/Capita%20for%20FM.csv", type, function(error, data) {
          x.domain([0, d3.max(data, function(d) { return d.percapita; })]);

      var chartHeight = barHeight * data.length;

      var y = d3.scale.linear()
        .range([chartHeight + gapBetweenGroups, 0]);

      var yAxis = d3.svg.axis()
        .scale(y)
        .tickFormat('')
        .tickSize(0)
        .orient("left");
// Specify the chart area and dimensions
      var rank = d3.select(".rank")
        .attr("width", spaceForLabels + chartWidth)
        .attr("height", chartHeight);
// Create bars
    var bar = rank.selectAll("g")
        .data(data)
        .enter().append("g")
        .attr("transform", function(d, i) {
        return "translate(" + spaceForLabels + "," + (i * barHeight + gapBetweenGroups * (0.5 + Math.floor(i/data.length))) + ")";
    });
// Create rectangles of the correct width
    bar.append("rect")
      .attr("class", "bar")
      .attr("width", function(d) { return x(d.percapita); })
      .attr("height", barHeight - 1);
// Add text label in bar
    bar.append("text")
      .attr("x", function(d) { return x(d.percapita-0.4); })
      .attr("y", barHeight / 2)
      .attr("dy", ".35em")
        .text(function(d) { return (d.percapita); });
// Draw labels
    bar.append("text")
      .attr("class", "label")
      .attr("x", function(d) {return - 80; })
      .attr("y", barHeight/2)
      .attr("dy", ".1em")
      .text(function(d) { return d.Ccity; });

    rank.append("g")
      .attr("class", "y axis")
      .attr("transform", "translate(" + spaceForLabels + ", " + -gapBetweenGroups/2 + ")")
      .call(yAxis);
    });

    function type(d) {
      d.percapita = +d.percapita; // coerce to number
    return d;
    }
    </script>
    <p class='graph-subtitle'> Source: USDA Farmer's Market Directory.</p>
  </div>
  </div>
  <div class="col-md-5 col-sm-12">
  <p>It turns out DC is a farmer’s market paradise. The District has the highest farmer’s markets per capita of large American cities. For every 100,000 people there are just over five. Put another way, there's a market in DC for every 18,832 people.<br> Not only is DC on top, but by a considerable margin. The next highest is Portland, Oregon, unsurprising given it’s locavore culture, but it has just under four farmer’s markets per 100,000 people.<br>What brings DC to the top? It's a walkable city with an emphasis on smaller, neighborhood markets as opposed to largescale city center ones. The District's close to farmland with long growing seasons. Federal agencies host their own markets and the well-organized reach of non-profits like <a class="link" target="_blank" href="https://www.freshfarmmarkets.org/">FreshFarm Markets</a> help to increase local food accessibility. Of course, having so many farmer's market per capita does not mean they are accessible to everyone. There is a heavy concentration of farmer's market west of the Anacostia and southeast of Rock Creek Park but outside of those areas markets are rarer and there are in fact none in ward seven.</p>
  </div>
  </div>
  <p class='content'>Where can all these farmer’s markets be found? Check out the map below to see DC’s farmer’s markets and click on the icon to find dates and times (where available).</p>
  <p class='graph-title'>Washington D.C. Farmer's Markets</p>
  <p class='graph-subtitle'> Click on an icon to display the farmer's market address, date and time</p>
  <div id="fm-dc-map" class="content"></div>
  <p class='graph-subtitle'> Source: USDA Farmer's Market Directory.<br>Don't see information about your farmer's market? Be a good data citizen and <a class="link" target="_blank" href="http://search.ams.usda.gov/farmersmarkets/">update the Directory</a> yourself!</p>
  <br>
  <hr id='end-line'>
  <p class='content'><b>Technical notes:</b> Graphics and rankings are based on the <a class="link" target="_blank" href="http://search.ams.usda.gov/farmersmarkets/">USDA Farmer's Market directory</a>, Census population estimates and Census zip code tabulation areas. Large American cities are defined as those with a population over 500,000. You can find complete code for this post<a class='link' target="_blank" href="https://github.com/katerabinowitz"> on my github page.</a></p>
  <br><br>
</div>
    
<div class='col-sm-3 side'>
  <ul class="sidebar nav nav-stacked fixed">
    <br>
        <li>Recent</li>
        <ul><ul class="nav nav-stacked fixed insidebar">
            <li><a href='./fluinDC.html'>When Sick, Where you Live in DC May Matter for Recovery</a></li>
            <li><a href='./rentReports.html'>Those DC Rent Reports? Take with a Grain of Salt</a></li>
            <li><a href='./wageRelative.html'>DC's Expensive, but that's not the Whole Story</a></li>
            <li><a href='./dcHomeChars.html'>Charting the Divide in New and Old DC Homes</a></li>
            <li><a href='./nightlife-neighborhoods.html'>The Changing Geography of DC Nightlife</a></li>
            <li><a href='./another-brick.html'>Another Brick in the Ward</a></li>
            <li><a href='./biketoWork2016.html'>Bike to Work Day: By the Numbers</a></li>
            <!---<li><a href='./parking-tickets-by-state.html'>Maryland Drivers Receive Most DC Parking Tickets</a></li>
            <li><a href='./school-facilities.html'>Shining a Light on DC's Multi-Billion Dollar School Modernization</a></li>
            <li><a href='./metro-ridership.html'>Charting Metro's Ridership Decline</a></li>
            <li><a href='./uber-surge-time.html'>When Does Uber Surge Near You?</a></li>
            <li><a href='./who-moves-to-DC.html'>Who Moves to DC?</a></li>
            <li><a href='./construction-boom-mapped.html'>Mapped: DC's Construction Boom</a></li>
            <li><a href='./drizly-neighborhood-favorites.html'>DC's Favorite Booze in the App Economy</a></li>
            <li><a href='./DC-region-breweries.html'>DC Region has 70 Breweries, Second Most on East Coast</a><li>
            <li><a href='./has-wmata-bottomed-out.html'>Has Metro Bottomed Out?</a></li>
            <li><a href='./rise-of-biking.html'>The Rise of Biking in DC, Visualized</a></li>
            <li><a href='./airbnb-listings-in-DC.html'>DC #3 in Airbnb Per Capita</a></li>
            <li><a href='./dc-property-flipping.html'>The Most House-Flipped DC Neighborhoods</a></li>
            <li><a href='./how-DC-spends.html'>How the DC Region Spends</a></li>
            <li><a href='./dc-hack-landmark.html'>DC Hack: Landmark</a></li>
            <li><a href='./DDD-in-DC.html'>What's Guy Fieri's Problem with DC?</a></li>
            <li><a href='./gentrification-by-numbers.html'>DC Gentrification by the Numbers</a></li>
            <li><a href='./farmers-mkt-per-capita.html'>DC #1 in Farmer's Markets per Capita</a></li>
            <li><a href='./10-year-dc-development.html'>DC Adding 15M+ Sq Ft in Next 10 Years</a></li>
            <li><a href='./your-commute-is-getting-worse.html'>Your Metro Commute is Getting Worse</a></li>
            <li><a href='./migration-comparison.html'>DC: The East Coast's Most Migratory City</a></li>
            <li><a href='./welcome-to-datalensdc.html'>Welcome to DataLensDC!</a></li> -->
        </ul></ul> 
        <li class="archiveside"><a href="./archive.html"><p style="margin-left:15px">Archive</p></a></li>
        <br>
        <li>Connect</li>  
        <ul><ul class="nav nav-stacked fixed connectbar">
              <li><a href="mailto:datalensdc@gmail.com" target="_blank"> <i class="fa fa-envelope"></i> send an email</a></li>
              <li><a href="https://twitter.com/DataLensDC" target="_blank"><i class="fa fa-twitter"></i> tweet our way</a></li>
              <li><a href="https://github.com/katerabinowitz" target="_blank"><i class="fa fa-github"></i> git at us</a></li>
              <!-- <li><a href="https://www.linkedin.com/pub/kate-rabinowitz/3b/b30/168" target="_blank"><i class="fa fa-linkedin"></i> link up</a></li> -->
          </ul></ul>
      </ul>
    </div>    
</div>
</body>
</html>