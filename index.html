<!DOCTYPE html>
<html lang="en">
<head>
<meta name="viewport" content="width=device-width, initial-scale=1">
  <title>DataLensDC: The District through Data</title>
  <meta name="viewport" content="initial-scale=1.0, user-scalable=no">
  <meta charset="utf-8">

  <link rel="stylesheet" href="http://maxcdn.bootstrapcdn.com/bootstrap/3.3.4/css/bootstrap.min.css">
  <link rel="stylesheet" href="http://maxcdn.bootstrapcdn.com/font-awesome/4.3.0/css/font-awesome.min.css">
  <link href='http://fonts.googleapis.com/css?family=Neuton:400,700' rel='stylesheet' type='text/css'>

  <link href='./CSS/main.css' rel='stylesheet' type='text/css'>
  <link href='./CSS/wmata-delay.css' rel='stylesheet' type='text/css'>
  <link href='./CSS/10-year-dc-development.css' rel='stylesheet' type='text/css'>
  <link href='./CSS/fm-per-capita.css' rel='stylesheet' type='text/css'>
  <link href='./CSS/DDD.css' rel='stylesheet' type='text/css'>
  <link href='./CSS/CEX.css' rel='stylesheet' type='text/css'>
  <link href='./CSS/prop-flip.css' rel='stylesheet' type='text/css'>
  <link href='./CSS/air-bnb.css' rel='stylesheet' type='text/css'>

  <script src="http://ajax.googleapis.com/ajax/libs/jquery/1.11.2/jquery.min.js"></script>
  <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.4/js/bootstrap.min.js"></script> 
  <script src="https://maps.googleapis.com/maps/api/js?key=AIzaSyDez_nj2eHP6b_mhMR1fn2Df2_jm-py41M"></script>
  <script src="http://d3js.org/d3.v3.min.js"></script> 
  <script src="http://labratrevenge.com/d3-tip/javascripts/d3.tip.v0.6.3.js"></script>
  <script src="./JS/propflip-maps.js"></script>
<script>
var cityCircle;
var map;
var infowindow = new google.maps.InfoWindow();
var MY_MAPTYPE_ID = 'custom_style';
function initialize() {
  var customOps = [
    {
        "featureType": "landscape",
        "elementType": "all",
        "stylers": [
            {"visibility": "simplified"},
            {"hue": "#0066ff"},
            {"saturation": 74},
            {"lightness": 100}
        ]
    },
    {
        "featureType": "poi",
        "elementType": "all",
        "stylers": [
            {"visibility": "simplified"}
        ]
    },
    {
        "featureType": "road",
        "elementType": "all",
        "stylers": [
            {"visibility": "simplified"}
        ]
    },{
        "featureType": "water",
        "elementType": "all",
        "stylers": [
            {"visibility": "simplified"},
            {"color": "#5f94ff"},
            {"lightness": 26},
            {"gamma": 5.86}
        ]
    }
];
  var mapOptions = {
    zoom: 4,
    center: new google.maps.LatLng(38, -97),
    mapTypeControlOptions: {
    mapTypeId: [google.maps.MapTypeId.ROADMAP, MY_MAPTYPE_ID]
    },
    mapTypeId:MY_MAPTYPE_ID,
    panControl: false,
    streetViewControl: false,
    // zoomControl:false
  };
  var map = new google.maps.Map(document.getElementById('map-canvas'), mapOptions);
  
  var styledMapOptions= {
    name:'Custom Style'
  };
  
  var customMapType = new google.maps.StyledMapType(
    customOps,styledMapOptions
    );
  map.mapTypes.set(MY_MAPTYPE_ID,customMapType);
    
  
  map.data.loadGeoJson('https://raw.githubusercontent.com/katerabinowitz/acsMigrationCityComp/master/Output/citymigration.geojson');
  map.data.setStyle(function(feature) {
    var migrationscore = feature.getProperty('Migration');
    return {
      icon: getCircle(migrationscore)
    };
  });
function getCircle(migrationscore) {
  var circle = {
    path: google.maps.SymbolPath.CIRCLE,
    fillColor: '#E62B2B',
    fillOpacity: .2,
    scale: migrationscore,
    strokeColor: '#E62B2B',
    strokeWeight: .5
  };
    map.data.addListener('click', function(event) {
      var cityname = event.feature.getProperty("city");
      var m2p = event.feature.getProperty("Migrant2Pop");
      var distance = event.feature.getProperty("wmDistance");
      infowindow.setContent("<div id='infowindow'>"+"<p>City: "+cityname +"<br> Migrants to city population: "+ m2p + "%<br> How far migrants travel: " + distance + " miles</p></div>");
      infowindow.setPosition(event.feature.getGeometry().get());
      infowindow.setOptions({pixelOffset: new google.maps.Size(0,-30)});
      infowindow.open(map);
  }); 
  return circle;
}
  }
google.maps.event.addDomListener(window, 'load', initialize);
</script>

<style>
  .bar {
    fill: #53CFCF;
    }
  
  .label{
    font: 12px sans-serif;
  }

  .axis text {
    font: 10px sans-serif;
  }

   .legend text {
    font: 10px sans-serif;
  }

  .axis path,
  .axis line {
    fill: none;
    stroke: #000;
    shape-rendering: crispEdges;
  }

  rect.bordered {
    stroke: #E6E6E6;
    stroke-width:2px;   
  }

  text.mono {
    font-size: 9pt;
    font-family: Consolas, courier;
    fill: #aaa;
  }

  text.axis-workweek {
    fill: #000;
  }

  text.axis-worktime {
    fill: #000;
  }

  text{
    font: 9px sans-serif;
  }
  </style>

  <script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-65753381-1', 'auto');
  ga('send', 'pageview');

</script>
</head>

<body>
<nav class="xsheader navbar navbar-default navbar-static-top">
  <div class='clearfix xsheader'>      
        <button type="button" class="navbar-toggle" data-toggle="collapse" data-target=".navbar-collapse">
          <span class="sr-only">Toggle navigation</span>
          <span class="mybar icon-bar"></span>
          <span class="mybar icon-bar"></span>
          <span class="mybar icon-bar"></span> 
        </button>
        <a class="navbar-brand" href="./index.html">
          <img src="./Images/DataLensDCResponsiveLogo2.png" alt="DataLensDC">  
        </a>
      <ul class="navbar-nav navbar-custom navbar-static-top navbar-collapse collapse dropdown-pull-right" id="main-navbar-custom">
        <li><a href="./about.html">About</a></li>
        <li><a href="./subscribe.html">Subscribe</a></li>
        <li><a href="./archive.html">Archive</a></li>
        <li class="dropdown"><a class="dropdown-toggle" href='#' data-toggle='dropdown'>Connect<span class='caret'></span></a>
          <ul class="navbar-custom dropmenu dropdown-menu dropdown-pull-right">
            <li><a href="mailto:datalensdc@gmail.com" target="_blank"> <i class="fa fa-envelope"></i> send an email</a></li>
            <li><a href="https://twitter.com/DataLensDC" target="_blank"><i class="fa fa-twitter"></i> tweet our way</a></li>
            <li><a href="https://github.com/katerabinowitz" target="_blank"><i class="fa fa-github"></i> git at us</a></li>
            <!-- <li><a href="https://www.linkedin.com/pub/kate-rabinowitz/3b/b30/168" target="_blank"><i class="fa fa-linkedin"></i> link up</a></li>  -->     
          </ul>
        </li>
      </ul>
  </div>
</nav>

<nav class="smheader navbar navbar-default navbar-static-top">
<a href="./index.html"><img class="logo" src="./Images/DataLensDC logo.png" alt="DataLensDC"></a>
  <div class="navbar-fixed">
    <ul class ="headerlist">
        <li><a href="./about.html">about</a></li>
        <li><a href="./subscribe.html">subscribe</a></li>
        <li><a href="mailto:datalensdc@gmail.com">email</a></li>
    </ul>
  </div>
</nav>

<div class='content row'>
	<div class='col-sm-9 col-xs-12'>
  <br>
   <h2><a href='./airbnb-listings-in-DC.html'>DC Has More Airbnb Listings Per Capita Than New York or Los Angeles</a></h2>
    <hr id='top-line'>
    <h3> Kate Rabinowitz // November 12, 2015 </h3>
    <p class="content">Airbnb’s $8 million lobbying effort to <a class="link" target="_blank" href="http://www.sfgate.com/bayarea/article/Prop-F-Measure-to-restrict-Airbnb-rentals-6609176.php">win at the San Francisco polls</a> is just the beginning. The lodging company announced Wednesday its “Community Compact,” a plan under which it will “use its experience in cities across the country to work with policymakers here in DC.” That’s a cute way of saying the company plans to hire a ton of lobbyists to work on city and state governments. <br><br>There is currently a  proposal in front of the DC Council that seeks to curtail the company’s reach here. Backed by UNITE-HERE Local 25, the union representing the city’s hotel workers, the bill would limit hosts to renting out rooms in occupied units instead of whole houses or apartments and never renting out more than one unit at a time.<br><br>Airbnb will likely spend thousands of dollars to fight accusations of raising rents, hurting businesses, disrupting neighborhoods, and facilitating the <a class='link' target="_blank" href="http://www.washingtonian.com/blogs/capitalcomment/local-news/dc-sues-owner-of-airbnb-rental-house-used-for-parties.php">occassional Ja Rule house party.</a><br><br>But Airbnb might be more popular in Washington than its opponents care to admit. A poll the company commissioned last month found that of 400 DC voters, 57 percent oppose local regulations that would restrict the types of lodging the site can offer. The survey also found that 35 percent of voters have a favorable opinion Airbnb compared to 9 percent with an unfavorable opinion, though 56 percent had no opinion.<br><br>Airbnb’s claims of popularity are better backed up by the raw numbers. New data suggest DC is a hotbed for the site, ranking third in listings per capita compared to other US cities. The District has over 3,500 listings, of which 2,855 are active.</p>
      <div id="bnbrankbar">
      <svg class="bnbrank"></svg>
      <script type="text/javascript">
      var chartWidth       = 350,
        barHeight        = 20,
        gapBetweenGroups = 40,
        spaceForLabels   = 80;

      var x = d3.scale.linear()
        .range([0, chartWidth]);

      d3.csv("https://raw.githubusercontent.com/katerabinowitz/Air-BnB/master/BnBPerCapita.csv", type, function(error, data) {
          x.domain([0, d3.max(data, function(d) { return d.Airpc; })]);

      var chartHeight = barHeight * 13;

      var y = d3.scale.linear()
        .range([chartHeight + gapBetweenGroups, 0]);

      var yAxis = d3.svg.axis()
        .scale(y)
        .tickFormat('')
        .tickSize(0)
        .orient("left");
// Specify the chart area and dimensions
      var bnbrank = d3.select(".bnbrank")
        .attr("width", spaceForLabels + chartWidth)
        .attr("height", chartHeight);
// Create bars
    var bar = bnbrank.selectAll("g")
        .data(data)
        .enter().append("g")
        .attr("transform", function(d, i) {
        return "translate(" + spaceForLabels + "," + (i * barHeight + gapBetweenGroups * (0.5 + Math.floor(i/data.length))) + ")";
    });
// Create rectangles of the correct width
    bar.append("rect")
      .attr("class", "bar")
      .attr("width", function(d) { return x(d.Airpc); })
      .attr("height", barHeight - 1);
// Add text label in bar
    bar.append("text")
      .attr("x", function(d) { return x(d.Airpc-0.4); })
      .attr("y", barHeight / 2)
      .attr("dy", ".35em")
        .text(function(d) { return (d.Airpc.toFixed(2)); });
// Draw labels
    bar.append("text")
      .attr("class", "label")
      .attr("x", function(d) {return - 80; })
      .attr("y", barHeight/2)
      .attr("dy", ".1em")
      .text(function(d) { return d.city; });

    bnbrank.append("g")
      .attr("class", "y axis")
      .attr("transform", "translate(" + spaceForLabels + ", " + -gapBetweenGroups/2 + ")")
      .call(yAxis);
    });

    function type(d) {
      d.Airpc = +d.Airpc; // coerce to number
    return d;
    }
    </script>
    <p class='graph-subtitle'> Source: InsideAirbnb, U.S. Census Population Estimates.</p>
  </div>
  <p class="content">There are 4.33 Airbnb listings per 1,000 people across the District, though the rate varies drastically across neighborhoods. <a href="http://www.washingtonian.com/blogs/capitalcomment/data/dc-has-more-airbnb-listings-per-capita-than-new-york.php" target="_blank" class="link"> Read the rest in my recent Washingtonian piece.</p>

  <br>
    <h2><a href='./dc-property-flipping.html'>What are the District's Most House-Flipped Neighborhoods?</a></h2>
    <hr id='top-line'>
    <h3> Kate Rabinowitz // October 22, 2015 </h3>
    <p class="content"> Just because I'm not in the market for a home doesn't mean I don't show up to open houses like I have hundreds of thousands to drop. The more open houses I go to, the more trends appear: everything is shiny, new and well placed in an open floor layout; there's a half bath squeezed under the stairs; the bathroom has modern sink no one can wash their face in. Many of these homes have been flipped, a common sight on the hot DC real estate market. House flipping is when a house is bought as a real estate investment, remodeled, and put back on the market at a substantially higher price.<br><br>On a larger scale, flipped homes can alter a real estate market, creating a scarcity of fixer-uppers and an abundance of all-cash deals. It can also be a sign of a changing community. Curious about how home flipping looked from a bird's eye view, I mapped flipped homes as a proportion of single family home sales in neighborhoods across the District. <a href="http://www.washingtonian.com/blogs/openhouse/the-real-estate-market/dc-neighborhoods-house-flipping-map.php" target="blank" class="link">Read the rest in my recent Washingtonian piece.</a></p> 
    <div class="btn-content">
    <input type="button" name="2011-2015" value="Show map for 2011-2015" onclick="show2011()" class="updatebtn"/>
    <input type="button" name="2013-2015" value="Show map for 2013-2015" onclick="show2013()" class="updatebtn"/>
    </div>
    <script>
        function show2011() {
    $("#short-history-map").hide();
   document.getElementById('long-history-map').style.display = "block";
    var center = mapFlip.getCenter(); 
   google.maps.event.trigger(mapFlip, 'resize')
   mapFlip.setCenter(center);
    }
    function show2013() {
    $("#long-history-map").hide();
   document.getElementById('short-history-map').style.display = "block";
   google.maps.event.trigger(ShortmapFlip, 'resize'); 
    }
    </script>
    <div id="long-history-map" style="display:none;">
        <p class="graph-title">Flipped Homes, as Percent of Single Family Homes on Market (May 2011-September 2015)</p>
        <p class='graph-subtitle'>Darker green indicates greater proportion of flipped homes. Click on a neighborhood for more detail.</p>
        <div id ="map-flip" class="content"><br></div>
        <p class='graph-subtitle'> Note: There is no data for dark gray areas. Data before 10/2013 is unavailable for select zip codes and have not been shown here.<br>Source: MRIS, provided by Kevin Wood to PoPville.</p>
    </div>

    <div id="short-history-map">
        <p class="graph-title">Flipped Homes, as Percent of Single Family Homes on Market (October 2013-September 2015)</p>
        <p class='graph-subtitle'>Darker green indicates greater proportion of flipped homes. Click on a neighborhood for more detail.</p>
        <div id ="short-map-flip" class="content"><br></div>
        <p class='graph-subtitle'>Note: There is no data for dark gray areas, which are typically green space or commercial areas.<br>Source: MRIS, provided by Kevin Wood to PoPville</p>
    </div>
    <br>

    <h2><a href='./how-DC-spends.html'>How the DC Region Spends</a></h2>
    <hr id='top-line'>
    <h3> Kate Rabinowitz // October 8, 2015 </h3>
    <p class="content"> As any resident of the DC region knows, this is an expensive place to live. That's in part balanced by the region's wealth. But how do expenses compare to other major metropolitan areas? I often wonder this when I visit other cities, purusing their shops and real estate listings. A recent Bureau of Labor Statistics study looks at this very question and reports the average spend of consumer units (like households) across a range of spending categories.<br><br>Check out the interactive chart below to see the percentage of annual expenditure an average consumer unit spends on each cateogory across urban areas. Press a button to change the view and hover over a bar to see the actual dollar amount spent. <a href="http://www.washingtonian.com/blogs/capitalcomment/data/how-the-dc-region-spends-its-money.php" target="blank" class="link">Read the rest in my recent Washingtonian piece.</a></p>
 <iframe src="http://www.datalensdc.com/cex-interactive.html" width="700" height="500" frameborder='0'></iframe>

    <h2><a href='./dc-hack-landmark.html'>DC Hack: Landmark for a New Type of Directions</a></h2>
    <hr id='top-line'>
    <h3> Kate Rabinowitz // September 30, 2015 </h3>
     <p class='content'>I love maps but am fairly terrible at using them for their most basic purpose - getting around. I am that person walking with their head down watching the blue dot move with them or alternatively going a block up, checking the street sign, and ever so awkwardly turning around.<br><br> <img class="landmark" src="./Images/landmark.png" alt="Landmark App Example" align="left" style="PADDING-RIGHT:10px"></a>So <a class='link' target="_blank" href="https://www.landmarkdirections.com">Landmark Directions</a>, a recent locally launched app from the mind of <a class='link' target="_blank" href='https://twitter.com/nguyenist'>Stephanie Nguyen</a>, quickly became one of my iPhone go-tos. Landmark (screenshot to the left) lets you navigate the world visually. Enter your destination and Landmark gives you turn by turn directions using photos of landmarks along the way. 
    <br><br>Recently I used Landmark to get around San Francisco and not only did it make navigating the city easier, it also changed the experience of getting around. Instead of being glued to that blue dot on my phone, my head was up and my eyes were taking in all the sights around me searching for that coffee shop, iconic building, or thrift store to take the left at. <br><br> Interested in getting around via Landmark? Download it for your <a class='link' target="_blank" href='https://itunes.apple.com/us/app/landmark-directions/id972096212?mt=8'>iPhone</a> or <a class='link' target="_blank" href='https://play.google.com/store/apps/details?id=com.silicalabs.landmark'>Android</a>. 
      </p> 

    <br>
        <h2><a href='./DDD-in-DC.html'>What's Guy Fieri's Problem with DC?</a></h2>
    <hr id='top-line'>
    <h3> Kate Rabinowitz // September 23, 2015 </h3>
     <p class='content'>Guilty pleasure confession: One of my favorite shows is <a class='link' target="_blank" href="http://www.foodnetwork.com/shows/diners-drive-ins-and-dives.html">Diners, Drive-Ins and Dives</a>. If you’re uninitiated it’s a show where <a class='link' target="_blank" href="https://www.google.com/search?q=google+images+guy+fieri&espv=2&biw=1274&bih=679&tbm=isch&tbo=u&source=univ&sa=X&ved=0CBwQsARqFQoTCOv5uNjxi8gCFcV7PgodDCQC_g">90’s emoji Guy Fieri</a> visits restaurants around the country. I can’t be sure what it is exactly - how Fieri bleaches only the inner bit of his goatee or unironically uses phrases like “that’s killer!” and “off the hook!” - but if I’m in a hotel room there’s an 85% chance that show is on.</p> 
      <p class='graph-title'>Guy Fieri Diner, Drive-in and Dives Visits</p>
      <p class='graph-subtitle'>Number of times a city is featured on Diners, Drive-ins and Dives</p>
  <div id="dddbar1">
<svg class="ddd"></svg>
<script>
(function() {
var margin = {top: 20, right: 20, bottom: 65, left: 35},
    width = 650 - margin.left - margin.right,
    height =  300- margin.top - margin.bottom;

var x = d3.scale.ordinal()
    .rangeRoundBands([0, width], .2);

var y = d3.scale.linear()
    .range([height, 0]);

var xAxis = d3.svg.axis()
    .scale(x)
    .orient("bottom");

var yAxis = d3.svg.axis()
    .scale(y)
    .outerTickSize(0)
    .orient("left");

var ddd = d3.select(".ddd")
    .attr("width", width + margin.left + margin.right)
    .attr("height", height + margin.top + margin.bottom)
  .append("g")
    .attr("transform", "translate(" + margin.left + "," + margin.top + ")");

d3.csv("https://raw.githubusercontent.com/katerabinowitz/DDD-DC/master/cityDDDsum.csv", type, function(error, data) {
  x.domain(data.map(function(d) { return d.City; }));
  y.domain([0, d3.max(data, function(d) { return d.Resturant; })]);

  ddd.append("g")
      .attr("class", "x axis")
      .attr("transform", "translate(0," + height + ")")
      .call(xAxis)
      .selectAll("text")
      .attr("y", 0)
      .attr("x", 9)
      .attr("dy", ".35em")
      .attr("transform", "rotate(60)")
      .style("text-anchor", "start");;

  ddd.append("g")
      .attr("class", "y axis")
      .call(yAxis);

  ddd.selectAll(".bar")
    .data(data)
    .enter()
    .append("rect")
      .attr("class", "bar")
      .style("fill", function(d, i){return d.City=="Washington"?"orange":"#53CFCF";})
      .attr("x", function(d) { return x(d.City); })
      .attr("y", function(d) { return y(d.Resturant); })
      .attr("height", function(d) { return height - y(d.Resturant); })
      .attr("width", x.rangeBand());
         
});
function type(d) {
  d.Resturant = +d.Resturant;
  return d;
}
})();
</script>
      <p class='graph-subtitle'> Source: <a class='link' target="_blank" href="http://ddd-and-yelp.mybluemix.net/"> Restaurants of Diners Drive-ins and Dives</a> by <a class='link' target="_blank" href="https://twitter.com/MaggieCriqui"> Maggie Criqui</a>.</p>
      </div> 
    <p class="content">After an embarrassing number of hours spent with Food Network however, I've become disappointed with how rarely Guy Fieri visits my city. <a class='link' target="_blank" href="./DDD-in-DC.html">Read on...</p>

    <br>
    <h2><a href='./gentrification-by-numbers.html'>DC Gentrification by the Numbers</a></h2>
    <hr id='top-line'>
    <h3> Kate Rabinowitz // September 14, 2015 </h3>
    <p class="content"> Gentrification is a much discussed topic in DC, along with many other American cities. The term describes a shift from a poorer neighborhood often populated with minority families to a wealthier neighborhood often populated with white singles and couples. Many District residents see the effects around them daily, passing by the luxury shops at CityCenter or a construction site for a new high-end apartment building.<br><br>I wanted to look at gentrification by the numbers over the past decade to better understand what these changes look like and where they are occurring...<a class='link' href='./gentrification-by-numbers.html'>Read on</a></p>

    <br>
    <h2><a href='./farmers-mkt-per-capita.html'>DC #1 in Farmer's Markets per Capita</a></h2>
    <hr id='top-line'>
    <h3> Kate Rabinowitz // August 31, 2015 </h3>
    <p class='content'>My husband’s first words to me were basically “Where can I find a good local farmer’s market?” to which I responded MARRY ME. That's how much I like farmer's markets. I’ve been fortunate that wherever I’ve lived in the District a good farmer’s market has never been more than a short Saturday morning jaunt in warmer months. I was curious if I simply gravitated to places near markets or this was more of a universal DC experience, and how DC compared to other American cities.</p> 
    <p class='graph-title'>Top 10 Farmer's Market Cities</p>
    <p class='graph-subtitle'> Number of farmer's markets per 100,000 people</p>
      <div id="rankbar">
      <svg class="rank"></svg>
      <script type="text/javascript">
      var chartWidth       = 275,
        barHeight        = 20,
        gapBetweenGroups = 40,
        spaceForLabels   = 80;

      var x = d3.scale.linear()
        .range([0, chartWidth]);

      d3.csv("https://raw.githubusercontent.com/katerabinowitz/Farmers-Market-City-Comp/master/Output/top10FMCity.csv", type, function(error, data) {
          x.domain([0, d3.max(data, function(d) { return d.percapita; })]);

      var chartHeight = barHeight * data.length;

      var y = d3.scale.linear()
        .range([chartHeight + gapBetweenGroups, 0]);

      var yAxis = d3.svg.axis()
        .scale(y)
        .tickFormat('')
        .tickSize(0)
        .orient("left");
// Specify the chart area and dimensions
      var rank = d3.select(".rank")
        .attr("width", spaceForLabels + chartWidth)
        .attr("height", chartHeight);
// Create bars
    var bar = rank.selectAll("g")
        .data(data)
        .enter().append("g")
        .attr("transform", function(d, i) {
        return "translate(" + spaceForLabels + "," + (i * barHeight + gapBetweenGroups * (0.5 + Math.floor(i/data.length))) + ")";
    });
// Create rectangles of the correct width
    bar.append("rect")
      .attr("class", "bar")
      .attr("width", function(d) { return x(d.percapita); })
      .attr("height", barHeight - 1);
// Add text label in bar
    bar.append("text")
      .attr("x", function(d) { return x(d.percapita-0.4); })
      .attr("y", barHeight / 2)
      .attr("dy", ".35em")
        .text(function(d) { return (d.percapita); });
// Draw labels
    bar.append("text")
      .attr("class", "label")
      .attr("x", function(d) {return - 80; })
      .attr("y", barHeight/2)
      .attr("dy", ".1em")
      .text(function(d) { return d.Ccity; });

    rank.append("g")
      .attr("class", "y axis")
      .attr("transform", "translate(" + spaceForLabels + ", " + -gapBetweenGroups/2 + ")")
      .call(yAxis);
    });

    function type(d) {
      d.percapita = +d.percapita; // coerce to number
    return d;
    }
    </script>
    </div>
    <p class='graph-subtitle'> Source: USDA Farmer's Market Directory.</p>
    <p class='content'>It turns out DC is a farmer’s market paradise...<a class='link' href='./farmers-mkt-per-capita.html'>Read on</a> </p>
    <br><br>
    <h2><a href='./10-year-dc-development.html'>DC to Add Over 15 Million Square Feet in the Next 10 Years</a></h2>
    <hr id='top-line'>
    <h3> Kate Rabinowitz // August 19, 2015</h3>
    <p class='content'>Cranes and holes the size of city blocks are not uncommon sights in the District. I remember not too long ago waiting in a large downtown parking lot for a Megabus. That's now CityCenter, where a Louis Vuitton just opened. DC has experienced rapid development in recent years, which is only set to continue in the next ten. The Office of Deputy Mayor's Planning and Economic Development (DMPED) executes the Mayor's economic development strategy including real estate development. Over the next ten years through DMPED the city will add over 15 million square feet of real estate to the market. Where is it going?...<a class='link' href='./10-year-dc-development.html'>Read on</a></p>

<div id='stackbar1'>
    <p class='graph-title'>Square Feet Added through DC City Government, by Year of Completion</p>
    <svg class="schart"></svg>
<script>
(function() {
var margin = {top: 20, right: 0, bottom: 17, left: 35},
    width = 620 - margin.left - margin.right,
    height = 400 - margin.top - margin.bottom;

var x = d3.scale.ordinal()
    .rangeRoundBands([0, width], .2);

var y = d3.scale.linear()
    .rangeRound([height, 0]);

var color = d3.scale.ordinal()
    .range(["#8dd3c7", "#ffffb3", "#bebada", "#fb8072", "#80b1d3", "#fdb462", "#b3de69"]);

var xAxis = d3.svg.axis()
    .scale(x)
    .orient("bottom");

var yAxis = d3.svg.axis()
    .scale(y)
    .orient("left")
    .tickFormat(d3.format(".2s"));

var schart = d3.select(".schart")
    .attr("width", width + margin.left + margin.right)
    .attr("height", height + margin.top + margin.bottom)
  .append("g")
    .attr("transform", "translate(" + margin.left + "," + margin.top + ")");

d3.csv("https://raw.githubusercontent.com/katerabinowitz/DC-RE_Dev/master/SqFtbyWardTime.csv", function(error, data) {
  if (error) throw error;

  color.domain(d3.keys(data[0]).filter(function(key) { return key !== "endYr"; }));

  data.forEach(function(d) {
    var y0 = 0;
    d.sqft = color.domain().map(function(name) { return {name: name, y0: y0, y1: y0 += +d[name]}; });
    d.total = d.sqft[d.sqft.length - 1].y1;
  });

  x.domain(data.map(function(d) { return d.endYr; }));
  y.domain([0, d3.max(data, function(d) { return d.total; })]);

  schart.append("g")
      .attr("class", "x axis")
      .attr("transform", "translate(0," + height + ")")
      .call(xAxis);

  schart.append("g")
      .attr("class", "y axis")
      .call(yAxis);

  var endYr = schart.selectAll(".endYr")
      .data(data)
    .enter().append("g")
      .attr("class", "g")
      .attr("transform", function(d) { return "translate(" + x(d.endYr) + ",0)"; });

  endYr.selectAll("rect")
      .data(function(d) { return d.sqft; })
    .enter().append("rect")
      .attr("width", x.rangeBand())
      .attr("y", function(d) { return y(d.y1); })
      .attr("height", function(d) { return y(d.y0) - y(d.y1); })
      .style("fill", function(d) { return color(d.name); });

  var legend = schart.selectAll(".legend")
      .data(color.domain().slice().reverse())
    .enter().append("g")
      .attr("class", "legend")
      .attr("transform", function(d, i) { return "translate(0," + i * 20 + ")"; });

  legend.append("rect")
      .attr("x", width - 18)
      .attr("width", 18)
      .attr("height", 18)
      .style("fill", color);

  legend.append("text")
      .attr("x", width - 24)
      .attr("y", 9)
      .attr("dy", ".35em")
      .style("text-anchor", "end")
      .text(function(d) { return d; });

});
})();
</script>

    <p class='graph-subtitle'> Source: Office of the Deputy Mayor's Planning and Economic Development (DMPED) <a class='link' target='_blank' href='https://octo.quickbase.com/db/bgk8b4c4n'>Project Pipeline Database</a>.</p>
</div>


<div id='smstack1'>
    <p class='graph-title'>Square Feet Added through DC City Government, by Year of Completion</p>
    <svg class="smchart"></svg>
<script>
(function() {
var margin = {top: 20, right: 0, bottom: 17, left: 35},
    width = 370 - margin.left - margin.right,
    height = 300 - margin.top - margin.bottom;

var x = d3.scale.ordinal()
    .rangeRoundBands([0, width], .2);

var y = d3.scale.linear()
    .rangeRound([height, 0]);

var color = d3.scale.ordinal()
    .range(["#8dd3c7", "#ffffb3", "#bebada", "#fb8072", "#80b1d3", "#fdb462", "#b3de69"]);

var xAxis = d3.svg.axis()
    .scale(x)
    .orient("bottom");

var yAxis = d3.svg.axis()
    .scale(y)
    .orient("left")
    .tickFormat(d3.format(".2s"));

var smchart = d3.select(".smchart")
    .attr("width", width + margin.left + margin.right)
    .attr("height", height + margin.top + margin.bottom)
  .append("g")
    .attr("transform", "translate(" + margin.left + "," + margin.top + ")");

d3.csv("https://raw.githubusercontent.com/katerabinowitz/DC-RE_Dev/master/SqFtbyWardTime.csv", function(error, data) {
  if (error) throw error;

  color.domain(d3.keys(data[0]).filter(function(key) { return key !== "endYr"; }));

  data.forEach(function(d) {
    var y0 = 0;
    d.sqft = color.domain().map(function(name) { return {name: name, y0: y0, y1: y0 += +d[name]}; });
    d.total = d.sqft[d.sqft.length - 1].y1;
  });

  x.domain(data.map(function(d) { return d.endYr; }));
  y.domain([0, d3.max(data, function(d) { return d.total; })]);

  smchart.append("g")
      .attr("class", "x axis")
      .attr("transform", "translate(0," + height + ")")
      .call(xAxis);

  smchart.append("g")
      .attr("class", "y axis")
      .call(yAxis);

  var endYr = smchart.selectAll(".endYr")
      .data(data)
    .enter().append("g")
      .attr("class", "g")
      .attr("transform", function(d) { return "translate(" + x(d.endYr) + ",0)"; });

  endYr.selectAll("rect")
      .data(function(d) { return d.sqft; })
    .enter().append("rect")
      .attr("width", x.rangeBand())
      .attr("y", function(d) { return y(d.y1); })
      .attr("height", function(d) { return y(d.y0) - y(d.y1); })
      .style("fill", function(d) { return color(d.name); });

  var legend = smchart.selectAll(".legend")
      .data(color.domain().slice().reverse())
    .enter().append("g")
      .attr("class", "legend")
      .attr("transform", function(d, i) { return "translate(0," + i * 20 + ")"; });

  legend.append("rect")
      .attr("x", width - 18)
      .attr("width", 18)
      .attr("height", 18)
      .style("fill", color);

  legend.append("text")
      .attr("x", width - 24)
      .attr("y", 9)
      .attr("dy", ".35em")
      .style("text-anchor", "end")
      .text(function(d) { return d; });

});
})();
</script>

    <p class='graph-subtitle'> Source: Office of the Deputy Mayor's Planning and Economic Development (DMPED) <a class='link' target='_blank' href='https://octo.quickbase.com/db/bgk8b4c4n'>Property Pipeline Database</a>.</p>
</div>

  <br><br>
  <h2><a href='./your-commute-is-getting-worse.html'>The Pain is Real: Your Metro Commute is Getting Worse</a></h2>
    <hr id='top-line'>
    <h3> Kate Rabinowitz // August 9, 2015</h3>
    <p class='content'>Last Thursday Metro sent a subtle signal that maybe I should <a class='link' target="_blank" href='http://www.washingtonpost.com/blogs/dr-gridlock/wp/2015/08/06/derailment-of-non-passenger-metro-train-delays-on-blue-orange-and-silver-lines/'>take a day off.</a> Unfortunately my boss felt otherwise. What started as a 'minor' derailment became two days of Metro competing with walking for the slowest way to get anywhere. It was bad and feels like part of a larger decline in Metro service. I was curious if that actually bore out in the data. Not only did it, but the decline is even more dramatic than I would've guessed.</p>
    <p class='graph-title'>Metro Delays for the First Half of 2013-15</p>
    <p class='graph-subtitle'> Number of delays reported on Metro for the first half of 2013, 2014 and 2015</p>
<div id="barchart1">
<svg class="chart"></svg>
<script>
(function() {
var margin = {top: 20, right: 0, bottom: 30, left: 35},
    width = 400 - margin.left - margin.right,
    height =  300- margin.top - margin.bottom;

var x = d3.scale.ordinal()
    .rangeRoundBands([0, width], .2);

var y = d3.scale.linear()
    .range([height, 0]);

var xAxis = d3.svg.axis()
    .scale(x)
    .orient("bottom");

var yAxis = d3.svg.axis()
    .scale(y)
    .outerTickSize(0)
    .orient("left");

var chart = d3.select(".chart")
    .attr("width", width + margin.left + margin.right)
    .attr("height", height + margin.top + margin.bottom)
  .append("g")
    .attr("transform", "translate(" + margin.left + "," + margin.top + ")");

d3.csv("https://raw.githubusercontent.com/katerabinowitz/Wmata-Delay/master/H1-Delays.csv", type, function(error, data) {
  x.domain(data.map(function(d) { return d.H1; }));
  y.domain([0, d3.max(data, function(d) { return d.DelayCountH1; })]);

  chart.append("g")
      .attr("class", "x axis")
      .attr("transform", "translate(0," + height + ")")
      .call(xAxis);

  chart.append("g")
      .attr("class", "y axis")
      .call(yAxis);

  chart.selectAll(".bar")
    .data(data)
    .enter()
    .append("rect")
      .attr("class", "bar")
      .attr("x", function(d) { return x(d.H1); })
      .attr("y", function(d) { return y(d.DelayCountH1); })
      .attr("height", function(d) { return height - y(d.DelayCountH1); })
      .attr("width", x.rangeBand());
         
});
function type(d) {
  d.value = +d.value;
  return d;
}
})();
</script>
</div>

<p class='content'> The first half of 2015 had nearly twice as many delays compared to the same period in the past two years...<a class='link' href='./your-commute-is-getting-worse.html'>Read on</a></p>

<br><br>
    <h2><a href='./migration-comparison.html'>DC: The East Coast's Most Migratory City</a></h2>
    <hr id='top-line'>
    <h3> Kate Rabinowitz // August 2, 2015 </h3>
        <p class='content'> When I moved to DC about five years ago, I did so with an onslaught of millennials in search of jobs and housing that was not their parents (along with a few others who may have had loftier aims). People would often ask 'where are you from?' because it was obviously not DC, and 'when did you move here?' because, inevitably, you just did.<br><br>And five years later these questions haven’t actually changed much. Of course, there are a number of people that have lived here for years, but DC is never short of transplants starting anew. The constant influx is one of the things I like about DC; it's a very migratory population. But, really, how migratory?</p>
        <p class='graph-title'>How Migratory are Major U.S. Cities?</p>
        <p class='graph-subtitle'> Circle size indicates migration score based on migration rate and migration distance traveled.<br>Click on a circle for more information</p>
        <div id="map-canvas"></div>
        <p class='graph-subtitle'> Source: Census American Community Survey (2008-2012 mobility estimates).</p>
        <p class='content'> In fact, DC is the most migratory city east of the Mississippi and rounds out the top five for most migratory cities...<a class='link' href='./migration-comparison.html'>Read on</a></p>

        <br><br>
    <h2><a href='./welcome-to-datalensdc.html'>Welcome to DataLensDC!</a></h2>
		<hr id='top-line'>
    <h3> Kate Rabinowitz // July 28, 2015 </h3>
		  <p class='content'> DataLensDC uses open-source data and applications to present readers with insight into the District's character, trends and hacks. There’s an incredible amount of rich data freely available about the District, it’s people and places. DataLensDC distills, visualizes and contextualizes this data to give readers a deeper understanding of the District and navigating life in it. <br><br> Oh, and hi! I’m Kate, lover of all things data and District. I started this website to experiment with different coding languages and share some cool findings along the way. In the months to come you can expect topics ranging from just how local DC food gets, who moves here, segregation and the most house-flipped neighborhoods.<br><br>
      Have feedback, ideas or a project you’d like to share here? Contact me at <a class='link' href="mailto:datalensdc@gmail.com">datalensdc@gmail.com.</a></p>
  </div>
    
  <div class='col-sm-3 side'>
	<ul class="sidebar nav nav-stacked fixed">
    <br>
  			<li>Recent</li>
        <ul><ul class="nav nav-stacked fixed insidebar">
            <li><a href='./airbnb-listings-in-DC.html'>DC #3 in Airbnb Per Capita</a></li>
            <li><a href='./dc-property-flipping.html'>The Most House-Flipped DC Neighborhoods</a></li>
            <li><a href='./how-DC-spends.html'>How the DC Region Spends</a></li>
            <li><a href='./dc-hack-landmark.html'>DC Hack: Landmark</a></li>
            <li><a href='./DDD-in-DC.html'>What's Guy Fieri's Problem with DC?</a></li>
            <li><a href='./gentrification-by-numbers.html'>DC Gentrification by the Numbers</a></li>
<!--             <li><a href='./farmers-mkt-per-capita.html'>DC #1 in Farmer's Markets per Capita</a></li>
            <li><a href='./10-year-dc-development.html'>DC Adding 15M+ Sq Ft in Next 10 Years</a></li>
            <li><a href='./your-commute-is-getting-worse.html'>Your Metro Commute is Getting Worse</a></li>
            <li><a href='./migration-comparison.html'>DC: The East Coast's Most Migratory City</a></li>
            <li><a href='./welcome-to-datalensdc.html'>Welcome to DataLensDC!</a></li> -->
        </ul></ul> 
        <li class="archiveside"><a href="./archive.html"><p style="margin-left:15px">Archive</p></a></li>
        <br>
  			<li>Connect</li>	
				<ul><ul class="nav nav-stacked fixed connectbar">
  			  		<li><a href="mailto:datalensdc@gmail.com" target="_blank"> <i class="fa fa-envelope"></i> send an email</a></li>
  			  		<li><a href="https://twitter.com/DataLensDC" target="_blank"><i class="fa fa-twitter"></i> tweet our way</a></li>
  			  		<li><a href="https://github.com/katerabinowitz" target="_blank"><i class="fa fa-github"></i> git at us</a></li>
  			  		<!-- <li><a href="https://www.linkedin.com/pub/kate-rabinowitz/3b/b30/168" target="_blank"><i class="fa fa-linkedin"></i> link up</a></li> -->
  				</ul></ul>
  		</ul>
		</div>		
</div>
</body>
</html>